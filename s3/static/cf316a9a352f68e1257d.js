"use strict";(self.webpackChunkcloud_onchain_trade_sdk=self.webpackChunkcloud_onchain_trade_sdk||[]).push([[2411],{52411:(e,t,n)=>{n.r(t),n.d(t,{default:()=>U});var o=n(97458),i=n(70942),s=n(7384),l=n(1139),a=n(52983),r=n(88947),u=n(59723),c=n(2951),m=n(89600),h=n(60160),C=n(28813),P=n(60714),g=n(27245),d=n(69212),E=n(74855),f=n(70301),p=n(8512),Z=n(56439),x=n(35640);const b=({hash:e})=>{const{useColumnSymbol:t,useColumnLeverage:n,useChangeSymbol:o,staticHost:s,useColumnPNL:l}=(0,a.useContext)(Z.Z),{symbol:r,symbolName:u,isLong:c,symbolType:C}=t(e),P=n(e),{isPNLPositive:g,isPNLNegative:E}=l(e),p=o(),b=(0,a.useCallback)((()=>x.ee.emit("MODAL_POSITION_DETAIL_OPEN",{hash:e})),[e]),y=(0,a.useCallback)((()=>p(r)),[p,r]);return(0,a.useMemo)((()=>a.createElement(i.Z,{alignItems:"center",justifyContent:"space-between"},a.createElement(i.Z,{className:"cursor-pointer",alignItems:"center",onClick:y},a.createElement(i.Z,{alignItems:"center",sx:{gap:"4px"}},a.createElement(f.b,{symbolType:C,isPNLNegative:E,isPNLPositive:g,staticHost:s}),a.createElement(m.Z,{color:"t.white",variant:"subtitle2",fontWeight:"500",bg:"buy",px:"4px",py:"2px",mr:"8px",className:"border-radius-4px "+(c?"symbol-side-long":"symbol-side-short")},P)),a.createElement(m.Z,{color:"t.primary",variant:"subtitle2",fontWeight:"500",mr:"8px"},u||r),a.createElement(h.Z,{color:"t.primary",size:16})),a.createElement(d.Z,{color:"t.secondary",size:16,onClick:b}))),[y,C,E,g,s,c,P,u,r,b])},y=({hash:e})=>{const{useColumnCollateral:t,getI18n:n}=(0,a.useContext)(Z.Z),o=t(e),s=(0,a.useCallback)((()=>x.ee.emit("MODAL_ADD_MARGIN_OPEN",{hash:e})),[e]);return(0,a.useMemo)((()=>a.createElement(i.Z,{flexDirection:"column",textAlign:"left",flex:1},a.createElement(m.Z,{color:"t.third",variant:"caption",fontWeight:"400"},n("userinfo-positions-column-initialMargin",{defaultValue:"Initial Margin"})),a.createElement(i.Z,{flexDirection:"row",alignItems:"center"},a.createElement(m.Z,{color:"t.primary",variant:"caption",fontWeight:"500"},o),a.createElement(C.Z,{className:"cursor-pointer",size:16,color:"t.third",ml:"4px",onClick:s})))),[o,n,s])},I=({hash:e})=>{const{useColumnPNL:t,getI18n:n}=(0,a.useContext)(Z.Z),{PNLAbbr:o,ROI:s,isPNLNegative:l,isROINegative:r,marginSymbol:u}=t(e);return(0,a.useMemo)((()=>a.createElement(i.Z,{flexDirection:"column",textAlign:"right",flex:1,alignItems:"end"},a.createElement(m.Z,{color:"t.third",variant:"caption",fontWeight:"400"},n("userinfo-positions-column-PNL-ROI-v2",{defaultValue:"PNL/ROI ({{margin}})",margin:u})),a.createElement(i.Z,null,a.createElement(m.Z,{color:l?"t.sell":"t.buy",variant:"caption",fontWeight:"500"},o),"Â ",a.createElement(m.Z,{color:r?"t.sell":"t.buy",variant:"caption",fontWeight:"500"},"(",s,")")))),[o,s,n,l,r,u])},L=({hash:e})=>{const{useColumnSize:t,getI18n:n}=(0,a.useContext)(Z.Z),o=t(e);return(0,a.useMemo)((()=>a.createElement(i.Z,{flexDirection:"column",textAlign:"center",flex:1},a.createElement(m.Z,{color:"t.third",variant:"caption",fontWeight:"400"},n("userinfo-column-size",{defaultValue:"Size ({{symbol}})",symbol:p.e.USD})),a.createElement(m.Z,{color:"t.primary",variant:"caption",fontWeight:"500"},o))),[n,o])},v=({hash:e})=>{const{useColumnEntryPrice:t,getI18n:n}=(0,a.useContext)(Z.Z),o=t(e);return(0,a.useMemo)((()=>a.createElement(i.Z,{flexDirection:"column",flex:1,textAlign:"left"},a.createElement(m.Z,{color:"t.third",variant:"caption",fontWeight:"400"},n("userinfo-positions-column-entryPrice",{defaultValue:"Entry Price"})),a.createElement(m.Z,{color:"t.primary",variant:"caption",fontWeight:"500"},o))),[o,n])},S=({hash:e})=>{const{useColumnMarkPrice:t,getI18n:n}=(0,a.useContext)(Z.Z),o=t(e);return(0,a.useMemo)((()=>a.createElement(i.Z,{flexDirection:"column",flex:1,alignItems:"center"},a.createElement(m.Z,{color:"t.third",variant:"caption",fontWeight:"400"},n("userinfo-positions-column-markPrice",{defaultValue:"Mark Price"})),a.createElement(m.Z,{color:"t.primary",variant:"caption",fontWeight:"500"},o))),[n,o])},M=({hash:e})=>{const{useColumnLiquidPrice:t,getI18n:n}=(0,a.useContext)(Z.Z),o=t(e);return(0,a.useMemo)((()=>a.createElement(i.Z,{flexDirection:"column",flex:1,textAlign:"right"},a.createElement(i.Z,{justifyContent:"flex-end"},a.createElement(g.Z,{arrow:!0,enablePortal:!0,tip:a.createElement(s.Z,{sx:{width:"282px"}},a.createElement(m.Z,{color:"t.white",variant:"caption",sx:{whiteSpace:"pre-line"}},n("userinfo-column-liquidPrice-tip",{defaultValue:"The position will be liquidated when the initial margin (after deducting the fee) reaches the corressponding lost rate."})))},a.createElement(m.Z,{color:"t.third",variant:"caption",fontWeight:"400",sx:(0,E.k)()},n("userinfo-positions-column-liquidPriceV2",{defaultValue:"Liq. Price"})))),a.createElement(m.Z,{color:"t.primary",variant:"caption",fontWeight:"500"},o))),[o,n])},k=({hash:e})=>{const{getI18n:t,useColumnTPSL:n}=(0,a.useContext)(Z.Z),{takeProfit:o,stopLoss:s}=n(e),l=(0,a.useCallback)((()=>x.ee.emit("MODAL_EDIT_TP_SL_OPEN",{hash:e})),[e]);return(0,a.useMemo)((()=>a.createElement(i.Z,{flexDirection:"column",textAlign:"left"},a.createElement(m.Z,{color:"t.third",variant:"caption",fontWeight:"400"},t("userinfo-positions-column-tpsl",{defaultValue:"TP/SL"})),a.createElement(i.Z,{flexDirection:"row",alignItems:"center"},a.createElement(m.Z,{color:"t.primary",variant:"caption",fontWeight:"500",mr:"6px"},o," / ",s),a.createElement(P.Z,{className:"cursor-pointer",color:"t.third",size:16,onClick:l})))),[t,l,s,o])},D=({hash:e})=>{const{getI18n:t,useColumnSymbol:n,useIsMarketClose:o}=(0,a.useContext)(Z.Z),{symbol:s}=n(e),l=(0,a.useCallback)((()=>x.ee.emit("MODAL_CLOSE_POSITION",{hash:e})),[e]),r=o(s);return(0,a.useMemo)((()=>a.createElement(i.Z,{flexDirection:"column",alignItems:"center",justifyContent:"flex-end"},!r&&a.createElement(m.Z,{className:"cursor-pointer",variant:"caption",fontWeight:"500",color:"t.yellow",onClick:l},t("userinfo-positions-close-position-V2",{defaultValue:"Close"})),r&&a.createElement(m.Z,{variant:"caption",fontWeight:"500",color:"t.disabled"},t("orderForm-button-marketClosed","Market Closed")))),[t,l,r])},N=({hash:e})=>(0,a.useMemo)((()=>a.createElement("div",{className:"positions-column-mobile","data-column-hash":e},a.createElement(b,{hash:e}),a.createElement(i.Z,{mt:"8px",flexDirection:"row",justifyContent:"space-between"},a.createElement(y,{hash:e}),a.createElement(L,{hash:e}),a.createElement(I,{hash:e})),a.createElement(i.Z,{mt:"8px",flexDirection:"row"},a.createElement(v,{hash:e}),a.createElement(S,{hash:e}),a.createElement(M,{hash:e})),a.createElement(i.Z,{mt:"8px",flexDirection:"row",justifyContent:"space-between"},a.createElement(k,{hash:e}),a.createElement(D,{hash:e})))),[e]);var A=n(46891),O=n(66627),T=n(3564),_=n(48210),w=n(26289);const W=()=>{const{usePositions:e,useContractClosePosition:t,usePositionsInitialed:n,getI18n:o,useTheme:u}=(0,a.useContext)(Z.Z),{isLight:c}=u(),m=t(),h=e(),C=n();return(0,a.useEffect)((()=>x.ee.on("POSITION_CLOSE",(async e=>{await m(e.hash),x.ee.emit("MODAL_CLOSE_POSITION_CLOSE",void 0)}))),[m]),(0,a.useMemo)((()=>a.createElement(i.Z,{className:"positions-container-mobile",sx:w.g},a.createElement(i.Z,{flexDirection:"column",width:"100%"},C?h.length?h.map((e=>a.createElement(N,{key:e,hash:e}))):a.createElement(s.Z,{mt:"60px"},a.createElement(r.$,{isLight:c,title:o("userinfo-positions-no-data",{defaultValue:"No Positions Data"})})):a.createElement(l.Z,{fullScreen:!0,inner:!0})))),[o,C,h,c])},V=e=>(0,a.useMemo)((()=>a.createElement(Z.Z.Provider,{value:{staticHost:e.staticHost,getI18n:e.getI18n,useTheme:e.useTheme,useIsMarketClose:e.useIsMarketClose,useChangeSymbol:e.useChangeSymbol,usePositions:e.usePositions,useContractClosePosition:e.useContractClosePosition,usePositionTPSL:e.usePositionTPSL,usePositionAddMargin:e.usePositionAddMargin,usePositionsInitialed:e.usePositionsInitialed,useColumnLeverage:e.useColumnLeverage,useColumnCollateral:e.useColumnCollateral,useColumnPNL:e.useColumnPNL,useColumnSymbol:e.useColumnSymbol,useColumnLiquidPrice:e.useColumnLiquidPrice,useColumnEntryPrice:e.useColumnEntryPrice,useColumnMarkPrice:e.useColumnMarkPrice,useColumnTPSL:e.useColumnTPSL,useMarkPrice:e.useMarkPrice,useColumnSize:e.useColumnSize,onChainPerpContractAddress:e.onChainPerpContractAddress,usePositionDetail:e.usePositionDetail,useActionBtnDisabled:e.useActionBtnDisabled}},a.createElement(W,null),a.createElement(A.t,null),a.createElement(O.D,null),a.createElement(u.l.Provider,{value:{getI18n:e.getI18n,useTPSL:e.usePositionTPSL,useMarkPrice:e.useMarkPrice,useActionBtnDisabled:e.useActionBtnDisabled,ee:x.ee,useColumnSymbol:e.useColumnSymbol}},a.createElement(c.y,null)),a.createElement(T.C.Provider,{value:{getI18n:e.getI18n,usePositionDetail:e.usePositionDetail,staticHost:e.staticHost,ee:x.ee}},a.createElement(_.F,null)))),[e]);var z=n(88502),H=n(95313),q=n(37592),B=n(87718),j=n(90974),R=n(56425),F=n(42093);const U=()=>{(0,F.Jo)(),(0,F.eO)();const{getI18n:e,i18n:{language:t}}=(0,j.V6)(),n=(0,H.E4)();return(0,a.useMemo)((()=>(0,o.jsx)(V,{locale:t,getI18n:e,siteHost:z.brokerConfig.staticBaseUrl,staticHost:z.brokerConfig.apxStaticBaseUrl,useTheme:R.F,useMarkPrice:F.CE,useIsMarketClose:q.Z,useChangeSymbol:F.d0,usePositions:F.$J,usePositionTPSL:F.mO,usePositionAddMargin:F.zS,useContractClosePosition:F.Im,usePositionsInitialed:F.Zm,useColumnSymbol:F.iA,useColumnLeverage:F.ch,useColumnCollateral:F.SD,useColumnEntryPrice:F.A4,useColumnMarkPrice:F.PH,useColumnLiquidPrice:F.lW,useColumnPNL:F.RM,useColumnTPSL:F.a1,useColumnSize:F.v_,usePositionDetail:F.KB,onChainPerpContractAddress:n.address,useActionBtnDisabled:B.a9,enableShare:!0})),[n.address,e])}}}]);