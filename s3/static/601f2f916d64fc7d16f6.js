"use strict";(self.webpackChunkcloud_onchain_trade_sdk=self.webpackChunkcloud_onchain_trade_sdk||[]).push([[2139],{2139:(e,t,o)=>{o.r(t),o.d(t,{default:()=>K});var s=o(97458),i=o(89600),n=o(7384),l=o(30033),a=o(56234),r=o(52983),u=o(90974),c=o(58921),m=o(70942),h=o(1139),d=o(17394),g=o(88947),y=o(69212),p=o(70301),b=o(11275),x=o(34686);const C=({hash:e})=>{const{useColumnMobile:t,useColumnLeverage:o,staticHost:s,useColumnPNL:n,useColumnSymbol:l}=(0,r.useContext)(b.T),{side:a}=t(e),u=o(e),{symbolName:c,symbolType:h,symbol:d}=l(e),{isPNLNegative:g,isPNLPositive:C}=n(e),f=(0,r.useCallback)((()=>x.ee.emit("MODAL_HISTORY_DETAIL_OPEN",{hash:e})),[e]);return(0,r.useMemo)((()=>r.createElement(m.Z,{display:"flex",alignItems:"center",justifyContent:"space-between"},r.createElement(m.Z,{alignItems:"center",sx:{gap:"8px"}},r.createElement(p.b,{staticHost:s,isPNLNegative:g,isPNLPositive:C,symbolType:h}),r.createElement(i.Z,{sx:{bg:"Long"===a?"buy":"sell",borderRadius:"4px",height:"20px",lineHeight:"20px",px:"4px",color:"t.white"},variant:"subtitle2"},u),r.createElement(i.Z,{color:"t.primary",variant:"subtitle2"},c||d," ",a)),r.createElement(y.Z,{color:"t.secondary",size:16,onClick:f}))),[s,g,C,h,a,u,c,d,f])},f=({hash:e})=>{const{useColumnMobile:t,useColumnFee:o,useColumnType:s,useColumnTime:n,useColumnPNL:l,getI18n:a}=(0,r.useContext)(b.T),{price:u,size:c}=t(e),h=o(e),d=s(e),g=n(e),{PNLNFormat:y,ROI:p,isPNLNegative:x,tokenInSymbol:C}=l(e);return(0,r.useMemo)((()=>r.createElement(m.Z,{mt:"8px",sx:{gap:"6px"}},r.createElement(m.Z,{width:"110px",flexDirection:"column",alignItems:"start"},r.createElement(i.Z,{variant:"caption",color:"t.third"},a("userinfo-history-mobile-type","Type")),r.createElement(i.Z,{variant:"captionSub",color:"t.primary"},d),r.createElement(i.Z,{mt:"8px",variant:"caption",color:"t.third"},a("userinfo-history-mobile-time","Time")),r.createElement(i.Z,{variant:"captionSub",color:"t.primary"},g)),r.createElement(m.Z,{width:"110px",flexDirection:"column",alignItems:"center"},r.createElement(i.Z,{variant:"caption",color:"t.third"},a("userinfo-history-mobile-price","Price")),r.createElement(i.Z,{variant:"captionSub",color:"t.primary"},u),r.createElement(i.Z,{mt:"8px",variant:"caption",color:"t.third"},a("userinfo-history-mobile-fee","Fee")),r.createElement(i.Z,{variant:"captionSub",color:"t.primary"},h)),r.createElement(m.Z,{width:"110px",flexDirection:"column",alignItems:"end"},r.createElement(i.Z,{variant:"caption",color:"t.third"},a("userinfo-history-mobile-size","Size(USD)")),r.createElement(i.Z,{variant:"captionSub",color:"t.primary"},c),r.createElement(i.Z,{mt:"8px",variant:"caption",color:"t.third"},a("userinfo-history-mobile-pnl-roi-v3","PNL/ROI")," (",C,")"),r.createElement(m.Z,{className:"pnl",flexDirection:"row"},r.createElement(i.Z,{color:void 0===x?"t.secondary":x?"t.sell":"t.buy",variant:"captionSub",fontWeight:"500",sx:{wordBreak:"break-word"}},y," (",p,")"))))),[y,p,h,a,x,u,c,g,d,C])},v=({hash:e})=>(0,r.useMemo)((()=>r.createElement("div",{className:"history-column-mobile","data-column-hash":e},r.createElement(C,{hash:e}),r.createElement(f,{hash:e}))),[e]);var E=o(74923),M=o(46714),j=o(24946);const Z=()=>{const{useHistory:e,useHistoryInitialed:t,getI18n:o,useHistoryLoadMore:s,useTheme:i}=(0,r.useContext)(b.T),{isLight:n}=i(),l=(0,r.useRef)(null),a=(0,d.Z)(l,{root:null,rootMargin:"20px",threshold:1}),u=e(),c=t(),{loadMoreLoading:y,hasMore:p,loadMore:x}=s(),C=(0,r.useMemo)((()=>!!a?.isIntersecting),[a?.isIntersecting]);return(0,r.useEffect)((()=>{p&&!y&&C&&x?.()}),[p,C,x,y]),(0,r.useMemo)((()=>r.createElement(m.Z,{className:"history-container-mobile",sx:j.f},r.createElement(m.Z,{flexDirection:"column",width:"100%"},u.length?u.map((e=>r.createElement(v,{key:e,hash:e}))):c?r.createElement(g.$,{isLight:n,title:o("userinfo-history-no-data",{defaultValue:"No History Data"})}):null,r.createElement("div",{ref:l}),y&&r.createElement(h.Z,{fullScreen:!0,inner:!0})))),[o,u,c,y,n])},H=e=>(0,r.useMemo)((()=>r.createElement(b.T.Provider,{value:{staticHost:e.staticHost,getI18n:e.getI18n,useTheme:e.useTheme,useHistoryLoadMore:e.useHistoryLoadMore,useHistory:e.useHistory,useHistoryInitialed:e.useHistoryInitialed,useColumnFee:e.useColumnFee,useColumnMobile:e.useColumnMobile,useColumnLeverage:e.useColumnLeverage,useColumnPNL:e.useColumnPNL,useColumnPrice:e.useColumnPrice,useColumnSymbol:e.useColumnSymbol,useColumnTime:e.useColumnTime,useColumnType:e.useColumnType,useColumnSide:e.useColumnSide,useColumnSize:e.useColumnSize,useHistoryDetail:e.useHistoryDetail}},r.createElement(Z,null),r.createElement(E.C.Provider,{value:{staticHost:e.staticHost,getI18n:e.getI18n,useHistoryDetail:e.useHistoryDetail,ee:x.ee}},r.createElement(M.F,null)))),[e]);var I=o(33511),S=o(52099),L=o(88502),T=o(56425),P=o(71588),N=o(95348);const O={height:"445px","&>div:first-of-type":{height:"54px"},".history-container-mobile":{height:"calc( 100% - 54px)",overflowX:"auto"},".non-logged-history":{height:"calc( 100% - 54px)",display:"flex",justifyContent:"center",alignItems:"center"}},k=()=>{const{loadMoreLoading:e,hasMore:t,loadMore:o}=(0,N.xK)(),{getI18n:i,i18n:{language:n}}=(0,u.V6)(),l=(0,r.useCallback)((()=>({loadMore:o,hasMore:t,loadMoreLoading:e})),[t,o,e]);return(0,r.useMemo)((()=>(0,s.jsx)(H,{locale:n,siteHost:L.brokerConfig.staticBaseUrl,staticHost:L.brokerConfig.apxStaticBaseUrl,getI18n:i,useTheme:T.F,useHistory:N.k6,useHistoryInitialed:N.zV,useColumnSymbol:N.iA,useColumnLeverage:N.ch,useColumnTime:N.a6,useColumnFee:N.b2,useColumnType:N.r2,useColumnPrice:N.yT,useColumnPNL:N.RM,useHistoryLoadMore:l,useColumnMobile:N.Xi,useColumnSide:N.uq,useColumnSize:N.v_,useHistoryDetail:N.uN,enableShare:!0})),[i,l])},D=()=>{const{getI18n:e}=(0,u.V6)();return(0,r.useMemo)((()=>(0,s.jsx)(i.Z,Object.assign({variant:"body1",color:"t.third",className:"non-logged-history"},{children:e("userinfo-history-no-data",{defaultValue:"No History Data"})}))),[e])},w=()=>{const[e,t]=(0,r.useState)(0),{getI18n:o}=(0,u.V6)(),{isConnected:n}=(0,S.mA)();return(0,r.useEffect)((()=>P.ee.on("SHOW_HISTORY_DRAWER",(()=>{t(Date.now())}))),[]),(0,r.useMemo)((()=>(0,s.jsxs)(I.ZP.Modal,Object.assign({minWidth:"375px",px:16,visible:Boolean(e),bg:"moduleBg",sx:O},{children:[(0,s.jsx)(I.ZP.ModalTitle,{title:(0,s.jsx)(i.Z,Object.assign({color:"t.primary",pl:"24px"},{children:o("userinfo-history-module-titleV2",{defaultValue:"History"})})),variant:"center",onClose:()=>t(0)}),e?n?(0,s.jsx)(k,{},e):(0,s.jsx)(D,{}):null]}))),[o,n,e])};var V=o(38097),_=o(42093);const z=r.lazy((()=>Promise.all([o.e(9961),o.e(655),o.e(2411)]).then(o.bind(o,52411)))),B=r.lazy((()=>Promise.all([o.e(9961),o.e(9165)]).then(o.bind(o,39165)))),R={height:"auto"},F={flex:1},A=({active:e,title:t})=>(0,r.useMemo)((()=>(0,s.jsx)(i.Z,Object.assign({variant:"subtitle1",fontWeight:"500",bg:e?"moduleBg":"bg3",color:e?"t.primary":"t.third",pl:"0",height:"48px",display:"flex",alignItems:"center",justifyContent:"center"},{children:t}))),[e,t]),$=({active:e})=>{const t=(0,_.$J)(),{getI18n:o}=(0,u.V6)();return(0,r.useMemo)((()=>(0,s.jsx)(A,{active:e,title:`${o("userinfo-positions-module-title",{defaultValue:"Positions"})} (${t.length})`})),[e,o,t.length])},W=({active:e})=>{const t=(0,V.yi)(),{getI18n:o}=(0,u.V6)();return(0,r.useMemo)((()=>(0,s.jsx)(A,{active:e,title:`${o("userinfo-orders-module-title",{defaultValue:"Orders"})} (${t.length})`})),[e,o,t.length])},K=()=>{(0,_.OB)(),(0,V.M2)();const[e,t]=(0,r.useState)(c.T.positions),o=(0,r.useCallback)((e=>{t(e)}),[]);return(0,r.useMemo)((()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.Z,Object.assign({height:"100%",bg:"moduleBg",overflow:"hidden",sx:{borderRadius:"8px"}},{children:(0,s.jsxs)(l.Z,Object.assign({lazy:!0,defaultActiveKey:e,onChange:o,height:"100%",tabSx:F},{children:[(0,s.jsx)(a.Z,Object.assign({tab:e=>(0,s.jsx)($,{active:e}),tabKey:c.T.positions,sx:R,unmountOnBlur:!0},{children:(0,s.jsx)(r.Suspense,Object.assign({fallback:null},{children:(0,s.jsx)(z,{})}))})),(0,s.jsx)(a.Z,Object.assign({tab:e=>(0,s.jsx)(W,{active:e}),tabKey:c.T.orders,sx:R,unmountOnBlur:!0},{children:(0,s.jsx)(r.Suspense,Object.assign({fallback:null},{children:(0,s.jsx)(B,{})}))}))]}))})),(0,s.jsx)(w,{})]})),[e,o])}}}]);