(self.webpackChunkcloud_onchain_trade_sdk=self.webpackChunkcloud_onchain_trade_sdk||[]).push([[6208],{69212:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var n=i(59180),r=i(52983);const o=e=>r.createElement(n.Z,{width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 16 16",...e},r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.33321 1.99988C2.59683 1.99988 1.99988 2.59683 1.99988 3.33321V12.6665C1.99988 13.4029 2.59683 13.9999 3.33321 13.9999H7.00007C7.36826 13.9999 7.66674 13.7014 7.66674 13.3332C7.66674 12.965 7.36826 12.6665 7.00007 12.6665H3.33321V3.33321H11.9999V6.66667C11.9999 7.03486 12.2984 7.33333 12.6665 7.33333C13.0347 7.33333 13.3332 7.03486 13.3332 6.66667V3.33321C13.3332 2.59683 12.7363 1.99988 11.9999 1.99988H3.33321ZM5.33321 5C4.96502 5 4.66654 5.29848 4.66654 5.66667C4.66654 6.03486 4.96502 6.33333 5.33321 6.33333L9.99988 6.33333C10.3681 6.33333 10.6665 6.03486 10.6665 5.66667C10.6665 5.29848 10.3681 5 9.99988 5L5.33321 5ZM4.66654 8.33333C4.66654 7.96514 4.96502 7.66667 5.33321 7.66667H6.99988C7.36807 7.66667 7.66654 7.96514 7.66654 8.33333C7.66654 8.70152 7.36807 9 6.99988 9H5.33321C4.96502 9 4.66654 8.70152 4.66654 8.33333ZM13.0715 8.94083C14.0415 9.90633 14.1651 11.3953 13.4423 12.4942L14.4816 13.5287C14.7425 13.7884 14.7425 14.2096 14.4816 14.4693C14.2206 14.7291 13.7975 14.7291 13.5366 14.4693L12.4687 13.4064C11.3819 14.0239 9.97348 13.871 9.04592 12.9478C7.93429 11.8413 7.93429 10.0473 9.04592 8.94083C10.1576 7.83434 11.9599 7.83434 13.0715 8.94083ZM12.1265 12.0071C12.7162 11.4201 12.7162 10.4684 12.1265 9.88145C11.5368 9.29445 10.5806 9.29445 9.99092 9.88145C9.40119 10.4684 9.40119 11.4201 9.99092 12.0071C10.5806 12.5941 11.5368 12.5941 12.1265 12.0071Z",fill:"currentColor"}))},74923:(e,t,i)=>{"use strict";i.d(t,{C:()=>n});const n=i(52983).createContext({})},46714:(e,t,i)=>{"use strict";i.d(t,{F:()=>A,K:()=>y});var n=i(70942),r=i(89600),o=i(7384),s=i(83780),a=i(70639),l=i(33511),c=i(40150),u=i(52983),d=i(36988),m=i(37207),p=i(37443),h=i(70301),g=i(74923);const y={Close:1,CancelLimit:2,Open:3},f={".tp-sl-price-input":{bg:"line",border:"none !important",".bn-input-prefix":{minWidth:"auto"},".bn-input-suffix":{mr:"4px"},input:{textAlign:"center",px:0,color:"t.primary",fontSize:"12px",lineHeight:"16px",fontWeight:"400"}}},b=({hash:e})=>{const{useHistoryDetail:t,getI18n:i,ee:o}=(0,u.useContext)(g.C),{useHistoryDetailSymbol:s,useHistoryDetailType:l}=t(),{symbol:c,isLong:d,symbolName:m}=s(e),{i18n:p}=l(e),h=(0,u.useCallback)((()=>{o.emit("MODAL_HISTORY_DETAIL_CLOSE",void 0)}),[o]);return(0,u.useMemo)((()=>u.createElement(n.Z,{alignItems:"center",justifyContent:"space-between",height:"54px"},u.createElement(r.Z,{variant:"subtitle1",color:"t.primary",fontWeight:500},m||c," ",d?i("orderForm-long","Long"):i("orderForm-short","Short")," - ",p),u.createElement(a.Z,{size:20,color:"t.third",sx:{cursor:"pointer",position:"absolute",right:"16px"},onClick:h}))),[i,p,d,h,c,m])},x=({hash:e})=>{const{getI18n:t,useHistoryDetail:i,staticHost:r}=(0,u.useContext)(g.C),{useHistoryDetailLeverage:o,useHistoryDetailSymbol:s,useHistoryDetailPNLROI:a}=i(),l=o(e),{symbolType:c}=s(e),{isPNLNegative:d,isPNLPositive:m}=a(e);return u.createElement(p.Z,{label:t("userinfo-dialog-detail-leverage","Leverage")},u.createElement(n.Z,{alignItems:"center",sx:{gap:"4px"}},l,u.createElement(h.b,{staticHost:r,symbolType:c,isPNLNegative:d,isPNLPositive:m})))},E=({hash:e})=>{const{getI18n:t,useHistoryDetail:i}=(0,u.useContext)(g.C),{useHistoryDetailPrincipal:n}=i(),s=n(e),a=(0,u.useMemo)((()=>u.createElement(o.Z,{sx:{width:"282px"}},u.createElement(r.Z,{color:"t.white",variant:"caption",sx:{whiteSpace:"pre-line"}},t("userinfo-dialog-detail-history-principal-tips","Principal is the total capital invested, including fees, when opening a position.")))),[t]);return u.createElement(p.Z,{label:t("userinfo-dialog-detail-principal","Principal"),tips:a,showLabelSx:!0},s)},v=({hash:e})=>{const{getI18n:t,useHistoryDetail:i}=(0,u.useContext)(g.C),{useHistoryDetailInitialMargin:n}=i(),s=n(e),a=(0,u.useMemo)((()=>u.createElement(o.Z,{sx:{width:"282px"}},u.createElement(r.Z,{color:"t.white",variant:"caption",sx:{whiteSpace:"pre-line"}},t("userinfo-dialog-detail-history-initialMargin-tips01","Initial Margin is the margin initially allocated to this position.")),u.createElement(r.Z,{color:"t.white",mt:"12px",variant:"caption",sx:{whiteSpace:"pre-line"}},t("userinfo-dialog-detail-history-initialMargin-tips02","Initial Margin = Principal - Open Fee")))),[t]);return u.createElement(p.Z,{label:t("userinfo-dialog-detail-initialMargin","Initial Margin"),tips:a,showLabelSx:!0},s)},C=({hash:e})=>{const{getI18n:t,useHistoryDetail:i}=(0,u.useContext)(g.C),{useHistoryDetailQtyAndSize:n,useHistoryDetailPair:r}=i(),{baseAsset:o}=r(e),{size:s,qty:a}=n(e);return u.createElement(p.Z,{label:t("userinfo-dialog-detail-qty","QTY(Size)")},a," ",o," ( ≈ ",s," USD )")},L=({hash:e})=>{const{getI18n:t,useHistoryDetail:i}=(0,u.useContext)(g.C),{useHistoryDetailPrice:n}=i(),{entryPrice:r}=n(e);return u.createElement(p.Z,{label:t("userinfo-dialog-detail-entryPrice","Entry Price")},r," USD")},P=({hash:e})=>{const{getI18n:t,useHistoryDetail:i}=(0,u.useContext)(g.C),{useHistoryDetailPrice:n}=i(),{closePrice:r}=n(e);return u.createElement(p.Z,{label:t("userinfo-dialog-detail-closePrice","Close Price")},r," USD")},F=({hash:e})=>{const{getI18n:t,useHistoryDetail:i}=(0,u.useContext)(g.C),{useHistoryDetailLiqLostRate:n}=i(),r=n(e);return u.createElement(p.Z,{label:t("userinfo-dialog-detail-liquidLostRate","Liquid Lost Rate")},(0,c.Bq)(Number(r),1))},N=({hash:e})=>{const{getI18n:t,useHistoryDetail:i}=(0,u.useContext)(g.C),{useHistoryDetailFundingFee:n}=i(),{fundingFee:o,isFundingFeeNegative:s}=n(e);return u.createElement(p.Z,{label:t("userinfo-dialog-detail-accFundingFee","Acc. Funding Fee")},u.createElement(r.Z,{color:s?"sell":"buy"},o))},w=({hash:e})=>{const{getI18n:t,useHistoryDetail:i}=(0,u.useContext)(g.C),{useHistoryDetailPNLROI:n}=i(),{PNL:s,isPNLNegative:a}=n(e),l=(0,u.useMemo)((()=>u.createElement(o.Z,{sx:{width:"282px"}},u.createElement(r.Z,{color:"t.white",variant:"caption",sx:{whiteSpace:"pre-line"}},t("userinfo-dialog-detail-history-realizedPnl-tips01","Realized PNL only calculates the profit and loss generated after the position is successfully opened.")),u.createElement(r.Z,{color:"t.white",mt:"12px",variant:"caption",sx:{whiteSpace:"pre-line"}},t("userinfo-dialog-detail-history-realizedPnl-tips02-v2","Long : Realized PNL = (Close Price - Entry Price) * Qty + Funding Fee")),u.createElement(r.Z,{color:"t.white",variant:"caption",sx:{whiteSpace:"pre-line"}},t("userinfo-dialog-detail-history-realizedPnl-tips03-v2","Short : Realized PNL = (Entry Price - Close Price ) * Qty + Funding Fee")))),[t]);return u.createElement(p.Z,{label:t("userinfo-dialog-detail-realizedPnl","Realized PNL"),tips:l,showLabelSx:!0},u.createElement(r.Z,{color:a?"sell":"buy"},s))},I=({hash:e})=>{const{getI18n:t,useHistoryDetail:i}=(0,u.useContext)(g.C),{useHistoryDetailPNLROI:n}=i(),{ROI:s,isROINegative:a}=n(e),l=(0,u.useMemo)((()=>u.createElement(o.Z,{sx:{width:"282px"}},u.createElement(r.Z,{color:"t.white",variant:"caption",sx:{whiteSpace:"pre-line"}},t("userinfo-dialog-detail-history-realizedROI-tips01","Realized ROI = Realized PNL / Initial margin * 100%")))),[t]);return u.createElement(p.Z,{label:t("userinfo-dialog-detail-realizedROI","Realized ROI"),tips:l,showLabelSx:!0},u.createElement(r.Z,{color:a?"sell":"buy"},s))},Z=({hash:e})=>{const{getI18n:t,useHistoryDetail:i}=(0,u.useContext)(g.C),{useHistoryDetailOpenCloseFee:n}=i(),{openFee:r}=n(e);return u.createElement(p.Z,{label:t("userinfo-dialog-detail-openFee","Open Fee")},r)},D=({hash:e})=>{const{getI18n:t,useHistoryDetail:i}=(0,u.useContext)(g.C),{useHistoryDetailOpenCloseFee:n}=i(),{closeFee:a,isDynamicClosingFee:l}=n(e);return u.createElement(p.Z,{label:t("userinfo-dialog-detail-closeFee","Close Fee"),alignItems:"top",height:"auto"},a,l?u.createElement(r.Z,{as:o.Z,variant:"caption1",color:"t.secondary"},u.createElement(d.c,{i18nKey:"userinfo-close-fee-based-pnl",defaults:t("userinfo-close-fee-based-pnl","Charge based on PNL <viewMoreLink>View</viewMoreLink>"),components:{viewMoreLink:u.createElement(s.Z,{href:m.WO,target:"_blank"})}})):null)},M=({hash:e})=>{const{getI18n:t,useHistoryDetail:i}=(0,u.useContext)(g.C),{useHistoryDetailOpenCloseFee:n}=i(),{executionFee:r}=n(e);return u.createElement(p.Z,{label:t("userinfo-dialog-detail-executionFee","Execution Fee")},r)},S=({hash:e})=>{const{getI18n:t,useHistoryDetail:i}=(0,u.useContext)(g.C),{useHistoryDetailNetProfit:n}=i(),{netProfit:s,isNetProfitNegative:a}=n(e),l=(0,u.useMemo)((()=>u.createElement(o.Z,{sx:{width:"282px"}},u.createElement(r.Z,{color:"t.white",variant:"caption",sx:{whiteSpace:"pre-line"}},t("userinfo-dialog-detail-history-netProfit-tips01","Net Profit is the profit and loss obtained after taking into account the trader's principal and trading fees.")),u.createElement(r.Z,{color:"t.white",mt:"12px",variant:"caption",sx:{whiteSpace:"pre-line"}},t("userinfo-dialog-detail-history-netProfit-tips02","Net Profit = Realized PNL - Open Fee - Close Fee")))),[t]);return u.createElement(p.Z,{label:t("userinfo-dialog-detail-netProfit","Net Profit"),tips:l,showLabelSx:!0},u.createElement(r.Z,{color:a?"sell":"buy"},s))},O=({hash:e})=>{const{getI18n:t,useHistoryDetail:i}=(0,u.useContext)(g.C),{useHistoryDetailDuration:n}=i(),{time:r}=n(e);return u.createElement(p.Z,{label:t("userinfo-dialog-detail-time","Time")},r)},H=({hash:e})=>u.createElement(n.Z,{sx:{gap:"24px",maxHeight:["80vh","unset"],overflow:["auto","hidden"]},flexDirection:["column","row"]},u.createElement(n.Z,{width:["100%","50%"],sx:{gap:"16px"},flexDirection:"column"},u.createElement(x,{hash:e}),u.createElement(E,{hash:e}),u.createElement(v,{hash:e}),u.createElement(C,{hash:e}),u.createElement(L,{hash:e}),u.createElement(P,{hash:e}),u.createElement(F,{hash:e}),u.createElement(N,{hash:e}),u.createElement(w,{hash:e}),u.createElement(I,{hash:e})),u.createElement(n.Z,{width:["100%","50%"],sx:{gap:"16px",bg:"bg3",borderRadius:"10px",p:"16px",height:"max-content"},flexDirection:"column"},u.createElement(Z,{hash:e}),u.createElement(M,{hash:e}),u.createElement(D,{hash:e}),u.createElement(S,{hash:e}),u.createElement(o.Z,{sx:{borderBottom:"1px solid",borderBottomColor:"line"}}),u.createElement(O,{hash:e}))),T=({hash:e})=>u.createElement(n.Z,{sx:{gap:"24px",maxHeight:["80vh","unset"],overflow:["auto","hidden"]},flexDirection:["column","row"]},u.createElement(n.Z,{width:["100%","50%"],sx:{gap:"16px"},flexDirection:"column"},u.createElement(x,{hash:e}),u.createElement(E,{hash:e}),u.createElement(v,{hash:e}),u.createElement(C,{hash:e}),u.createElement(L,{hash:e}),u.createElement(F,{hash:e})),u.createElement(n.Z,{width:["100%","50%"],sx:{gap:"16px",bg:"bg3",borderRadius:"10px",p:"16px",height:"max-content"},flexDirection:"column"},u.createElement(Z,{hash:e}),u.createElement(M,{hash:e}),u.createElement(O,{hash:e}))),$=({hash:e})=>u.createElement(n.Z,{sx:{maxHeight:["80vh","unset"],overflow:["auto","hidden"]}},u.createElement(n.Z,{sx:{gap:"16px",width:"100%"},flexDirection:"column"},u.createElement(E,{hash:e}),u.createElement(O,{hash:e}))),R=({hash:e})=>{const{useHistoryDetail:t}=(0,u.useContext)(g.C),{useHistoryDetailType:i}=t(),{type:n}=i(e);return u.createElement(o.Z,{sx:f,width:["100%",n===y.CancelLimit?"368px":"718px"]},u.createElement(b,{hash:e}),n===y.Close&&u.createElement(H,{hash:e}),n===y.Open&&u.createElement(T,{hash:e}),n===y.CancelLimit&&u.createElement($,{hash:e}))},A=()=>{const{ee:e}=(0,u.useContext)(g.C),[t,i]=(0,u.useState)(""),n=(0,u.useCallback)((()=>{i("")}),[]);return(0,u.useEffect)((()=>e.on("MODAL_HISTORY_DETAIL_OPEN",(({hash:e})=>{i(e)}))),[e]),(0,u.useEffect)((()=>e.on("MODAL_HISTORY_DETAIL_CLOSE",(()=>{i("")}))),[e]),(0,u.useMemo)((()=>u.createElement(l.ZP.Modal,{visible:Boolean(t),bg:["popupBg","transparent"],px:"16px",pt:"0",pb:["24px","16px"],width:["100%","unset"],onMaskClick:n,layerProps:{tx:"onChainPerp",variant:"dialog"}},t?u.createElement(R,{hash:t}):null)),[t,n])}},11275:(e,t,i)=>{"use strict";i.d(t,{T:()=>n});const n=i(52983).createContext({})},34686:(e,t,i)=>{"use strict";i.d(t,{ee:()=>n});const n=new(i(42405).v)},24946:(e,t,i)=>{"use strict";i.d(t,{f:()=>l,r:()=>a});const n={time:100,symbol:94,side:94,leverage:94,type:94,size:94,price:94,fee:94,pnl:140,detail:48},r=e=>({width:`${e}px`,flex:`1 0 ${e}px`}),o={display:"flex",justifyContent:"flex-end",alignItems:"center"},s=Object.keys(n).reduce(((e,t)=>e+n[t]),0),a={flexDirection:"column",width:"100%",height:"100%",flex:"1 0",overflowX:"auto",overflowY:"hidden",position:"relative",".history-header":{width:"100%",height:"32px",minHeight:"32px",display:"flex",flexDirection:"row",alignItems:"center",borderBottom:"1px solid",borderBottomColor:"newLine",boxSizing:"border-box",minWidth:s},".list-container":{minWidth:s},".history-body":{minWidth:s,overflowX:"hidden",overflowY:"auto",height:"100%"},".history-column":{display:"flex",flexDirection:"row",width:"100%",height:"40px",minHeight:"40px",borderBottom:"1px solid",borderBottomColor:"newLine",alignItems:"center",boxSizing:"border-box"},".cursor-pointer":{cursor:"pointer"},".border-radius-4px":{borderRadius:"4px"},".border-radius-8px":{borderRadius:"8px"},".time":{...r(n.time)},".symbol":{...r(n.symbol)},".side":{...r(n.side)},".leverage":{...r(n.leverage)},".type":{...r(n.type)},".size":{...r(n.size),...o},".price":{...r(n.price),...o},".fee":{...r(n.fee),...o},".pnl":{...r(n.pnl),...o},".detail":{...r(n.detail),display:"flex",justifyContent:"center",alignItems:"center"}},l={".cursor-pointer":{cursor:"pointer"},".border-radius-4px":{borderRadius:"4px"},".border-radius-8px":{borderRadius:"8px"},".history-column-mobile":{pb:"16px",mb:"16px",borderBottom:"1px solid",borderBottomColor:"line",boxSizing:"border-box"}}},88947:(e,t,i)=>{"use strict";i.d(t,{$:()=>l});var n=i(70942),r=i(89600),o=i(5848),s=i(32495),a=i(52983);const l=({title:e,isLight:t})=>(0,a.useMemo)((()=>a.createElement(n.Z,{flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%"},t?a.createElement(o.Z,{size:60}):a.createElement(s.Z,{size:60}),a.createElement(r.Z,{variant:"body2",color:"t.third"},e))),[e,t])},70301:(e,t,i)=>{"use strict";i.d(t,{b:()=>o});var n=i(7384),r=i(52983);const o=({symbolType:e,isPNLNegative:t,isPNLPositive:i,staticHost:o})=>{const s=(0,r.useMemo)((()=>t?`${o}/static/images/degen-mode/degen-negative-pnl.svg`:i?`${o}/static/images/degen-mode/degen-positive-pnl.svg`:`${o}/static/images/degen-mode/degen-neutral.svg`),[t,i,o]);return 1===e?r.createElement(n.Z,{as:"img",src:s,width:"20px",height:"20px"}):null}},37443:(e,t,i)=>{"use strict";i.d(t,{Z:()=>d});var n=i(89600),r=i(70942),o=i(27245),s=i(52983),a=i(83630),l=i(74855);const c=({label:e,showLabelSx:t,tips:i})=>{const{isMobile:r}=(0,a.F)();return(0,s.useMemo)((()=>{const a=s.createElement(n.Z,{variant:"subtitle2",color:"t.secondary",sx:r&&t?(0,l.k)("t.secondary"):{}},e);return i?s.createElement(o.Z,{arrow:!0,scroll:!1,resize:!1,cursor:"pointer",bg:"bg4",display:"flex",tip:i},a):a}),[r,t,e,i])},u=({children:e})=>(0,s.useMemo)((()=>s.createElement(n.Z,{variant:"subtitle2",color:"t.primary",textAlign:"right"},e)),[e]),d=({label:e,showLabelSx:t=!1,children:i,tips:n,...o})=>(0,s.useMemo)((()=>s.createElement(r.Z,{alignItems:"center",justifyContent:"space-between",height:"24px",...o},s.createElement(c,{tips:n,label:e,showLabelSx:t}),s.createElement(u,null,i))),[o,n,e,t,i])},1139:(e,t,i)=>{"use strict";i.d(t,{Z:()=>c});var n=i(52983),r=i(63730),o=i(17197);const s={position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",textAlign:"center"},a=(0,n.memo)((function({show:e=!0,fullScreen:t=!1,inner:i,children:r,zIndex:a}){if(!e)return r||null;const l=n.createElement(o.Z,{sx:{zIndex:a||"100",...s}});return t?n.createElement(n.Fragment,null,r,n.createElement("div",{style:{position:i?"absolute":"fixed",top:0,left:0,width:"100%",height:"100%",background:"radial-gradient(rgba(0, 0, 0, 0.05) 30%, transparent)",zIndex:2e3}},l)):n.createElement(n.Fragment,null,r,l)}));let l;a.show=({fullScreen:e=!1}={})=>{l||(l=document.createElement("div"),document.body.appendChild(l)),r.render(n.createElement(a,{fullScreen:e}),l)},a.hide=()=>{l&&r.render(n.createElement(a,{show:!1}),l)};const c=a},89479:(e,t,i)=>{var n=1/0,r="[object Symbol]",o="\\ud800-\\udfff",s="\\u0300-\\u036f\\ufe20-\\ufe23",a="\\u20d0-\\u20f0",l="\\ufe0e\\ufe0f",c="["+o+"]",u="["+s+a+"]",d="\\ud83c[\\udffb-\\udfff]",m="[^"+o+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",g="\\u200d",y="(?:"+u+"|"+d+")?",f="["+l+"]?",b=f+y+"(?:"+g+"(?:"+[m,p,h].join("|")+")"+f+y+")*",x="(?:"+[m+u+"?",u,p,h,c].join("|")+")",E=RegExp(d+"(?="+d+")|"+x+b,"g"),v=RegExp("["+g+o+s+a+l+"]"),C="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g,L="object"==typeof self&&self&&self.Object===Object&&self,P=C||L||Function("return this")();function F(e){return v.test(e)}var N=Object.prototype.toString,w=P.Symbol,I=w?w.prototype:void 0,Z=I?I.toString:void 0;function D(e){return null==e?"":function(e){if("string"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&N.call(e)==r}(e))return Z?Z.call(e):"";var t=e+"";return"0"==t&&1/e==-n?"-0":t}(e)}var M=("toUpperCase",function(e){var t,i,n,r,o=F(e=D(e))?function(e){return F(e)?function(e){return e.match(E)||[]}(e):function(e){return e.split("")}(e)}(e):void 0,s=o?o[0]:e.charAt(0),a=o?(t=o,i=1,r=t.length,n=void 0===n?r:n,!i&&n>=r?t:function(e,t,i){var n=-1,r=e.length;t<0&&(t=-t>r?0:r+t),(i=i>r?r:i)<0&&(i+=r),r=t>i?0:i-t>>>0,t>>>=0;for(var o=Array(r);++n<r;)o[n]=e[n+t];return o}(t,i,n)).join(""):e.slice(1);return s.toUpperCase()+a});e.exports=function(e){return M(D(e).toLowerCase())}},17394:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var n=i(52983);const r=function(e,t){var i=(0,n.useState)(null),r=i[0],o=i[1];return(0,n.useEffect)((function(){if(e.current&&"function"==typeof IntersectionObserver){var i=new IntersectionObserver((function(e){o(e[0])}),t);return i.observe(e.current),function(){o(null),i.disconnect()}}return function(){}}),[e.current,t.threshold,t.root,t.rootMargin]),r}},95348:(e,t,i)=>{"use strict";i.d(t,{b2:()=>y,ch:()=>b,Xi:()=>P,RM:()=>F,yT:()=>L,uq:()=>N,v_:()=>w,iA:()=>Z,a6:()=>D,r2:()=>M,k6:()=>c,uN:()=>ee,zV:()=>u,xK:()=>re});var n=i(52983),r=i(95313),o=i(53958),s=i(17921),a=i(25048);const l=(0,i(91890).Ue)((e=>({initialed:!1,history:[],historyMap:{},appendHistory(t){e((0,a.ZP)((e=>{e.initialed=!0,e.history=[...e.history,...t.map((e=>e.hash))],e.historyMap=Object.assign(Object.assign({},e.historyMap),t.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t.hash]:t})),{}))})))},resetHistory(){e((0,a.ZP)((e=>{e.initialed=!1,e.history=[],e.historyMap={}})))}}))),c=()=>l((e=>e.history)),u=()=>l((e=>e.initialed)),d=(e,t)=>l((i=>{var n,r;return null===(r=null===(n=i.historyMap)||void 0===n?void 0:n[e])||void 0===r?void 0:r[t]})),m=e=>{const t=d(e,"margin"),i=d(e,"tokenIn"),a=(0,r.QG)(i),l=(0,r.At)(i),c=(0,r.RK)(l),u=l&&void 0!==a;return(0,n.useMemo)((()=>({initialed:u,tokenIn:i,symbol:l,address:i,margin:new s.Z((0,o.mb)(t,a)),decimals:a,qtyPrecision:c})),[u,i,l,t,a,c])},p=e=>{const{symbol:t}=m(e),i=(0,r.Ms)(t);return(0,n.useMemo)((()=>i),[i])};var h=i(73337);const g=e=>{const t=d(e,"openFee"),i=d(e,"closeFee"),r=d(e,"fundingFee"),s=d(e,"executionFee"),a=d(e,"holdingFee"),{decimals:l}=m(e);return(0,n.useMemo)((()=>({openFee:(0,o.mb)(t,l),closeFee:(0,o.mb)(i,l),fundingFee:(0,o.mb)(r,l),executionFee:(0,o.mb)(s,l),holdingFee:(0,o.mb)(a,l)})),[i,l,s,r,a,t])},y=e=>{const t=d(e,"actionType"),{openFee:i,closeFee:r,executionFee:o}=g(e),{initialed:a,symbol:l,qtyPrecision:c}=m(e);return(0,n.useMemo)((()=>{let e=new s.Z("-");return"OPEN"===t&&(e=new s.Z(i).plus(o)),"CLOSE"!==t&&"TP"!==t&&"SL"!==t&&"LIQUIDATED"!==t||(e=new s.Z(r)),"CANCEL_LIMIT"!==t&&"SYSTEM_CANCEL"!==t||(e=new s.Z("-")),a&&e.isFinite()?`${(0,h.uf)(e,c)} ${l}`:"-"}),[t,r,o,a,i,l,c])},f=e=>{const t=m(e),{symbol:i,index:r}=p(e);return(0,n.useMemo)((()=>Object.assign(Object.assign({},t),{initialed:t.initialed&&void 0!==i,margin:new s.Z(t.margin).multipliedBy(r)})),[r,t,i])},b=e=>{const t=(e=>{const t=d(e,"qty"),i=d(e,"entryPrice"),{margin:r,initialed:o}=f(e);return(0,n.useMemo)((()=>o?new s.Z(t).multipliedBy(i).dividedBy(r):new s.Z(1/0)),[i,o,r,t])})(e);return(0,n.useMemo)((()=>t.isFinite()?`${t.toFixed(1)}x`:"-"),[t])};var x=i(89479),E=i.n(x),v=i(90974);const C=e=>{const t=d(e,"actionType"),i=d(e,"entryPrice"),r=d(e,"closePrice");return(0,n.useMemo)((()=>"CANCEL_LIMIT"===t||"SYSTEM_CANCEL"===t?"-":"OPEN"===t?i:"LIQUIDATED"===t||"TP"===t||"SL"===t||"CLOSE"===t?r:"-"),[t,r,i])},L=e=>{const t=d(e,"pair"),i=C(e),o=(0,r.fV)(t);return(0,n.useMemo)((()=>{const e=new s.Z(i);return e.isFinite()?(0,h.uf)(e,o):"-"}),[i,o])},P=e=>{const t=d(e,"actionType"),i=d(e,"side"),r=d(e,"qty"),o=d(e,"pair"),a=d(e,"timestamp"),{getI18n:l}=(0,v.V6)(),c=C(e),u=L(e),{symbol:p,qtyPrecision:g}=m(e),y=(0,n.useMemo)((()=>{const e=new s.Z(r).multipliedBy(c);return e.isFinite()?(0,h.uf)(e,g):"-"}),[c,r,g]),f=(0,n.useMemo)((()=>"CANCEL_LIMIT"===t||"SYSTEM_CANCEL"===t),[t]),b=(0,n.useMemo)((()=>{const e=(0,h.Bv)(Number(a));return(0,h.Bv)().diff(e,"hour")>24?e.format("YYYY-MM-DD"):e.format("HH:mm:ss")}),[a]);return(0,n.useMemo)((()=>({side:l(`userinfo-history-side-${i.toUpperCase()}`,E()(i))||E()(i),symbol:o,price:u,size:y,isCancelOrSystemCancel:f,timeFormat:b,marginToken:p})),[u,l,f,o,i,y,b,p])},F=e=>{const t=d(e,"pnl"),i=d(e,"actionType"),{fundingFee:r,holdingFee:a}=g(e),{initialed:l,margin:c,symbol:u,qtyPrecision:p,decimals:y}=m(e);return(0,n.useMemo)((()=>{if("CLOSE"===i||"LIQUIDATED"===i||"TP"===i||"SL"===i){const e=new s.Z((0,o.mb)(t,y)).plus(r).minus(a),i=new s.Z(e).dividedBy(c),n=(0,h.uf)(e,p),d=`${(0,h.uf)(i.multipliedBy(100),2)}%`;return{PNL:l&&e.isFinite()?e.isNegative()?`${n} ${u}`:`+${n} ${u}`:"-",PNLNFormat:l&&e.isFinite()?e.isNegative()?(0,h.pF)(e.toNumber(),p):`+${(0,h.pF)(e.toNumber(),p)}`:"-",ROI:l&&i.isFinite()?i.isNegative()?d:`+${d}`:"-",isPNLNegative:e.isNegative(),isPNLPositive:e.gt(0),isROINegative:i.isNegative(),tokenInSymbol:u}}return{PNL:"-",ROI:"-",isPNLNegative:void 0,isROINegative:void 0,PNLNFormat:"-",tokenInSymbol:u}}),[i,y,r,a,l,c,t,p,u])},N=e=>{const{getI18n:t}=(0,v.V6)(),i=d(e,"side");return(0,n.useMemo)((()=>t(`userinfo-history-side-${i.toUpperCase()}`,E()(i))||E()(i)),[t,i])},w=e=>{const t=d(e,"qty"),i=d(e,"entryPrice"),r=d(e,"closePrice"),o=d(e,"actionType");return(0,n.useMemo)((()=>{let e=new s.Z("-");return"OPEN"===o&&(e=new s.Z(i).multipliedBy(t)),"CLOSE"!==o&&"SL"!==o&&"TP"!==o&&"LIQUIDATED"!==o||(e=new s.Z(r).multipliedBy(t)),e.isFinite()?e.toFixed(1):"-"}),[o,r,i,t])};var I=i(87718);const Z=e=>{const t=d(e,"pair"),i=d(e,"isLong"),{productMap:r}=(0,I.GS)();return(0,n.useMemo)((()=>{var e,n;return{symbol:t,isLong:i,symbolType:null===(e=r[t])||void 0===e?void 0:e.symbolType,symbolName:null===(n=r[t])||void 0===n?void 0:n.symbolName}}),[t,i,r])},D=e=>{const t=d(e,"timestamp");return(0,n.useMemo)((()=>(0,h.Bv)(Number(t)).isValid()?(0,h.Bv)(Number(t)).format("MM-DD HH:mm:ss"):"-"),[t])},M=e=>{const t=d(e,"actionType"),{getI18n:i}=(0,v.V6)();return(0,n.useMemo)((()=>t?i(`userinfo-history-type-${t.toUpperCase()}`,{defaultValue:t.toUpperCase()}):"-"),[i,t])};var S=i(37207),O=i(52099),H=i(82974);const T=e=>{const t=d(e,"qty"),i=(e=>{const t=(0,H.E)(),{data:i}=(0,O.do)(Object.assign(Object.assign({},t),{functionName:"pairsV3",staleTime:1/0,scopeKey:"pairs"}));return(0,n.useMemo)((()=>{var t;return(null===(t=(i||[]).find((t=>t.name.replace("/","")===e)))||void 0===t?void 0:t.base)||""}),[i,e])})(d(e,"pair")),a=d(e,"entryPrice"),l=(0,n.useMemo)((()=>new s.Z(t).multipliedBy(a)),[a,t]),c=(0,r.tz)(i,l);return(0,n.useMemo)((()=>(0,o.mb)(null==c?void 0:c.liqLostP,S.cB.percent)),[c])},$=e=>{const t=d(e,"timestamp"),{getI18n:i}=(0,v.V6)();return(0,n.useMemo)((()=>(0,h.jE)(Number(t),i)),[t,i])},R=e=>{const{openFee:t,executionFee:i,fundingFee:r,closeFee:o,holdingFee:a}=g(e),{symbol:l,index:c}=p(e);return(0,n.useMemo)((()=>({initialed:void 0!==l,openFee:new s.Z(t).multipliedBy(c),closeFee:new s.Z(o).multipliedBy(c),fundingFee:new s.Z(r).multipliedBy(c),executionFee:new s.Z(i).multipliedBy(c),holdingFee:new s.Z(a).multipliedBy(c)})),[l,t,c,o,r,i,a])},A=e=>{const{fundingFee:t,holdingFee:i}=g(e),{fundingFee:r,holdingFee:o}=R(e),{symbol:a,qtyPrecision:l}=m(e);return(0,n.useMemo)((()=>{const e=new s.Z(t).minus(i);return{fundingFee:`${e.isNegative()?"":"+"}${(0,h.FL)(e,l)} ${a} ( ≈ ${(0,h.uf)(new s.Z(r).minus(o),2)} USD )`,isFundingFeeNegative:e.isNegative()}}),[t,i,l,a,r,o])},B=e=>{const{margin:t,symbol:i,qtyPrecision:r}=m(e),{margin:o}=f(e);return(0,n.useMemo)((()=>`${(0,h.FL)(t,r)} ${i} ( ≈ ${(0,h.uf)(o,1)} USD )`),[t,r,i,o])};var z=i(46714);const j=["CLOSE","TP","SL","LIQUIDATED"],_=["CANCEL_LIMIT","SYSTEM_CANCEL"],k=["OPEN"],q=e=>{const{getI18n:t}=(0,v.V6)(),i=d(e,"actionType"),r=t(`userinfo-history-type-${i.toUpperCase()}`,{defaultValue:i.toUpperCase()}),o=(0,n.useMemo)((()=>[{types:j,type:z.K.Close},{types:k,type:z.K.Open},{types:_,type:z.K.CancelLimit}]),[]);return(0,n.useMemo)((()=>Object.assign(Object.assign({},o.find((e=>e.types.includes(i.toUpperCase())))||{type:void 0}),{i18n:r})),[i,r,o])},U=e=>{const t=d(e,"pnl"),{margin:i,symbol:r,qtyPrecision:a,decimals:l}=m(e),c=d(e,"actionType"),{fundingFee:u}=g(e),{index:y}=p(e);return(0,n.useMemo)((()=>{if(j.includes(c)){const e=new s.Z((0,o.mb)(t,l)).plus(u),n=new s.Z(e).dividedBy(i),c=(0,h.FL)(e,a),d=`${(0,h.uf)(n.multipliedBy(100),2)}%`,m=e.isNegative(),p=e.isPositive(),g=n.isNegative();return{PNL:e.isFinite()?`${m?"":"+"}${c} ${r} ( ≈ ${(0,h.uf)(e.multipliedBy(y),1)} USD\n        )`:"-",PNLOrigin:e,PNLFormatted:c,ROI:n.isFinite()?`${g?"":"+"}${d}`:"-",isPNLNegative:m,isROINegative:g,isPNLPositive:p,tokenInSymbol:r}}return{PNL:"-",PNLOrigin:new s.Z(0),PNLFormatted:"-",ROI:"-",isPNLNegative:!1,isROINegative:!1,isPNLPositive:!1,tokenInSymbol:r}}),[c,l,u,y,i,t,a,r])},V=e=>{const{PNLOrigin:t}=U(e),{openFee:i,executionFee:n,closeFee:r}=g(e);return t.minus(i).minus(n).minus(r)},Y=e=>{const{symbol:t,qtyPrecision:i}=m(e),r=V(e),o=(e=>{const t=V(e),{index:i}=p(e);return t.multipliedBy(i)})(e);return(0,n.useMemo)((()=>({netProfit:r.isNaN()?"-":`${r.isNegative()?"":"+"}${(0,h.FL)(r.toNumber(),i)} ${t} ( ≈ ${(0,h.uf)(o,1)} USD )`,isNetProfitNegative:r.isNegative()})),[r,i,t,o])},Q=e=>{const{openFee:t,closeFee:i,executionFee:r}=g(e),{openFee:o,closeFee:a,executionFee:l}=R(e),{symbol:c,qtyPrecision:u}=m(e);return(0,n.useMemo)((()=>({openFee:`${(0,h.FL)(new s.Z(t),u)} ${c} ( ≈ ${(0,h.uf)(o,2)} USD )`,executionFee:`${(0,h.FL)(new s.Z(r),u)} ${c} ( ≈ ${(0,h.uf)(l,2)} USD )`,closeFee:`${(0,h.FL)(i,u)} ${c} ( ≈ ${(0,h.uf)(a,2)} USD )`})),[t,r,u,c,o,l,i,a])},K=e=>{const t=d(e,"pair"),i=(0,I.Lh)(t,"baseAsset");return(0,n.useMemo)((()=>({pair:t,baseAsset:i})),[t,i])},W=e=>{const t=d(e,"pair"),i=d(e,"entryPrice"),o=d(e,"closePrice"),a=(0,r.fV)(t);return(0,n.useMemo)((()=>({entryPrice:new s.Z(i).isFinite()?(0,h.uf)(i,a):"-",closePrice:new s.Z(o).isFinite()?(0,h.uf)(o,a):"-"})),[i,a,o])},G=e=>d(e,"amountIn"),X=e=>{const t=G(e),i=(e=>{const t=G(e),{symbol:i}=m(e),{index:n}=p(i);return new s.Z(t).multipliedBy(n)})(e),{symbol:r,qtyPrecision:o}=m(e);return(0,n.useMemo)((()=>`${(0,h.FL)(t,o)} ${r} ( ≈ ${(0,h.uf)(i,1)} USD )`),[t,o,r,i])},J=e=>{const t=w(e),i=d(e,"qty"),r=d(e,"pair"),o=(0,I.Lh)(r,"quantityPrecision");return(0,n.useMemo)((()=>({size:t,qty:(0,h.uf)(i,o)})),[i,o,t])},ee=()=>(0,n.useMemo)((()=>({useHistoryDetailType:q,useHistoryDetailPair:K,useHistoryDetailLeverage:b,useHistoryDetailInitialMargin:B,useHistoryDetailPrincipal:X,useHistoryDetailSymbol:Z,useHistoryDetailQtyAndSize:J,useHistoryDetailFundingFee:A,useHistoryDetailOpenCloseFee:Q,useHistoryDetailPrice:W,useHistoryDetailLiqLostRate:T,useHistoryDetailPNLROI:U,useHistoryDetailNetProfit:Y,useHistoryDetailDuration:$})),[]);var te,ie=i(76398),ne=i(59629);!function(e){e[e.LIMIT=0]="LIMIT",e[e.CANCEL_LIMIT=1]="CANCEL_LIMIT",e[e.SYSTEM_CANCEL=2]="SYSTEM_CANCEL",e[e.OPEN=3]="OPEN",e[e.CLOSE=4]="CLOSE",e[e.TP=5]="TP",e[e.SL=6]="SL",e[e.LIQUIDATED=7]="LIQUIDATED"}(te||(te={}));const re=()=>{const e=(0,r.E4)(),{address:t,isConnected:i}=(0,O.mA)(),s=l((e=>e.appendHistory)),a=l((e=>e.resetHistory)),[c,u]=(0,n.useState)(!1),[d,m]=(0,n.useState)(!1),p=(0,O.yL)(),h=(0,O.cq)(Object.assign(Object.assign({},e),{signerOrProvider:p})),g=(0,n.useRef)(0),y=(0,n.useRef)(0),f=(0,ne.D)((()=>(0,ie.__awaiter)(void 0,void 0,void 0,(function*(){if(!i||!t)return;if(d)return;m(!0);const e=yield null==h?void 0:h.getOrderAndTradeHistoryV2(t,10*g.current,10);g.current+=1,y.current+=e.length,m(!1),u(10*g.current<=y.current),s(e.filter((e=>0!==e.actionType)).map((e=>{const t={hash:`${e.hash}-${e.timestamp}-${e.actionType}`,timestamp:`${e.timestamp}000`,pair:e.pair.replace("/",""),isLong:e.isLong,actionType:te[e.actionType],side:e.isLong?"LONG":"SHORT",margin:e.margin.toString(),qty:(0,o.mb)(e.qty.toString(),S.cB.qty),entryPrice:(0,o.mb)(e.entryPrice.toString(),S.cB.price),closePrice:(0,o.mb)(e.closePrice.toString(),S.cB.price),openFee:e.openFee.toString(),executionFee:e.executionFee.toString(),fundingFee:e.fundingFee.toString(),closeFee:e.closeFee.toString(),holdingFee:e.holdingFee.toString(),tokenIn:e.tokenIn,pnl:e.pnl.toString(),amountIn:(0,o.mb)(e.amountIn.toString(),S.cB.marginToken)};return Object.assign(Object.assign({},e),t)})))}))));return(0,n.useEffect)((()=>{i||s([])}),[s,i]),(0,n.useEffect)((()=>(i&&f(),()=>{i&&a()})),[i]),(0,n.useMemo)((()=>({loadMore:f,hasMore:c,loadMoreLoading:d})),[f,c,d])}}}]);