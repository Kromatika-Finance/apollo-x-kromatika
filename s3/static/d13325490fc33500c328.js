"use strict";(self.webpackChunkcloud_trade_sdk=self.webpackChunkcloud_trade_sdk||[]).push([[3362],{3185:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(5163),i=n(2784),r=n(98569);const s=function(e){return i.createElement(r.Z,(0,a.__assign)({width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24"},e),i.createElement("path",{d:"M12 10.586l5.95-5.95a1 1 0 111.414 1.414L13.414 12l5.95 5.95a1 1 0 01-1.414 1.414L12 13.414l-5.95 5.95a1 1 0 01-1.414-1.414l5.95-5.95-5.95-5.95A1 1 0 016.05 4.636l5.95 5.95z"}))}},33322:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(5163),i=n(2784),r=n(92036),s=(0,i.forwardRef)((function(e,t){var n=r.Z;return i.createElement(n,(0,a.__assign)({ref:t,as:"label",tx:"forms",variant:"label"},e,{__css:{alignItems:"center"}}))}));s.displayName="Label";const o=s},71927:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(5163),i=n(2784),r=n(98569);const s=function(e){return i.createElement(r.Z,(0,a.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-7.233 0l3.006 3.005-1.768 1.768L12 13.767l-3.005 3.005-1.768-1.768 3.005-3.005-3.005-3.005 1.768-1.767L12 10.23l3.005-3.005 1.768 1.767L13.767 12z",fill:"currentColor"}))}},32027:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(5163),i=n(2784),r=n(98569);const s=function(e){return i.createElement(r.Z,(0,a.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 21a9 9 0 100-18 9 9 0 000 18zm-1.25-5.5V18h2.5v-2.5h-2.5zm0-9.5v7h2.5V6h-2.5z",fill:"currentColor"}))}},19076:(e,t,n)=>{n.d(t,{Z:()=>g});var a=n(5163),i=n(2784),r=n(92036),s=n(62143),o=n(87938),l=n(32027),c=n(71927),d=n(23377),u=n(77711),h=function(e){var t=e.isShow,n=e.variant,s=e.getValid,o=e.customIcon,u={info:l.Z,error:c.Z,warning:l.Z,success:d.Z}[n],h=o&&s(o)?i.cloneElement(o,(0,a.__assign)({size:20},o.props),[]):i.createElement(u,{size:20});return t?i.createElement(r.Z,{sx:{width:"24px",height:"24px",mr:"xs",justifyContent:"center",alignItems:"center",flexShrink:0}},h):null},m=function(e){var t=e.isShow,n=e.onClose;return t?i.createElement(r.Z,{sx:{width:"24px",height:"24px",justifyContent:"center",alignItems:"center",color:"t.disabled",marginLeft:"auto"}},i.createElement(u.Z,{size:18,onClick:n,cursor:"pointer"})):null},f=(0,i.forwardRef)((function(e,t){var n=e.children,o=e.icon,l=e.variant,c=void 0===l?"warning":l,d=e.closable,u=void 0!==d&&d,f=e.showIcon,p=void 0===f||f,g=e.onClose,x=e.title,v=e.insideCenter,b=void 0!==v&&v,w=e.__css,j=(0,a.__rest)(e,["children","icon","variant","closable","showIcon","onClose","title","insideCenter","__css"]);return i.createElement(r.Z,(0,a.__assign)({tx:"alertV2",variant:c,alignItems:"flex-start",ref:t,width:"100%",__css:(0,a.__assign)({p:"ls"},w)},j),i.createElement(r.Z,{justifyContent:b?"center":"",flex:"1",alignItems:"flex-start"},i.createElement(h,{isShow:p,variant:c,getValid:i.isValidElement,customIcon:o}),i.createElement(s.Z,{__css:{wordBreak:"break-word",flexShrink:1,height:"auto",lineHeight:"24px",width:b?"auto":"100%",color:"alertV2."+c+"FontColor"}},x&&i.createElement(s.Z,{as:"p",__css:{fontWeight:"medium"}},x),n)),i.createElement(m,{isShow:u,onClose:g}))})),p=(0,i.forwardRef)((function(e,t){var n=e.enablePortal,r=e.container,s=e.topOfPage,l=e.__css,c=(0,a.__rest)(e,["enablePortal","container","topOfPage","__css"]);return s||n||r?i.createElement(o.ZP,{container:r},i.createElement(f,(0,a.__assign)({__css:s?(0,a.__assign)({position:"fixed",top:0,left:0,zIndex:"alert",borderRadius:0},l):{}},c,{ref:t}))):i.createElement(f,(0,a.__assign)({},c))}));p.displayName="AlertV2";const g=p},47535:(e,t,n)=>{n.d(t,{C:()=>h,Z:()=>m});var a=n(52322),i=n(33322),r=n(48658),s=n(45362),o=n(66306),l=n(33470),c=n(31843),d=n(65866);const u={className:"amount-input-container",sx:{height:"48px",width:"100%",bg:"bg3",mb:"16px","&.bn-input-status-error":{border:"none"},".bn-input-helper-text":{color:"errors",fontSize:"14px"}}};var h;!function(e){e[e.Deposit=1]="Deposit",e[e.Withdraw=2]="Withdraw"}(h||(h={}));const m=({value:e,onChange:t,available:n,maxWithdraw:m,asset:f,type:p,precision:g=8,getI18n:x})=>{var v;const b=(0,c.w)({oldValue:e,precision:g}),w=Number(-1===m?n:Math.min(m,Number(n))),j=Number(e)>w,y=(null===(v=m.toString().split(".")[1])||void 0===v?void 0:v.length)||0;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",Object.assign({className:"amount-label"},{children:[(0,a.jsx)(i.Z,Object.assign({width:"auto"},{children:x("Amount")}),void 0),(0,a.jsxs)(r.Z,Object.assign({variant:"body2",color:"t.third"},{children:[x("Available"),(0,a.jsxs)(r.Z,Object.assign({ml:"4px",as:"span",variant:"subtitle2",color:"t.primary"},{children:[n," ",f]}),void 0)]}),void 0)]}),void 0),(0,a.jsx)(o.Z,{value:e,onChange:e=>t(b(e.currentTarget.value)),boxProps:u,variant:"outlineLarge",className:"amount-input",labelFixed:!0,error:j,suffix:(0,a.jsx)(s.Z,Object.assign({variant:"quiet",onClick:()=>{t((0,l.GW)(w,g).toString())}},{children:x("MAX")}),void 0),errorText:p===h.Withdraw?x("wallet-withdraw-amount-error",{defaultValue:"Please enter an amount less than the max withdrawal amount."}):x("wallet-deposit-amount-error",{defaultValue:"Please enter an amount less than the max deposit amount."})},void 0),-1!==m&&(0,a.jsx)("div",Object.assign({className:"amount-info"},{children:x("wallet-remaining-withdraw-info",{defaultValue:"Daily withdrawal amount remaining: {{maxWithdraw}} USD",maxWithdraw:(0,d.uf)(m,y>8?8:y,3)})}),void 0)]},void 0)}},76644:(e,t,n)=>{n.d(t,{m:()=>s});var a=n(52322),i=n(88767);const r=new i.QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:!1}}}),s=({children:e})=>(0,a.jsx)(i.QueryClientProvider,Object.assign({client:r},{children:e}),void 0)},22292:(e,t,n)=>{n.d(t,{Z:()=>w});var a=n(52322),i=n(2784),r=n(62143),s=n(45362),o=n(65866),l=n(37745),c=n(64296),d=n(33411),u=n(92036),h=n(7845);const m={color:"t.primary",justifyContent:"flex-start",alignItems:"center",flex:1,height:"100%",fontSize:"14px",".asset-code":{ml:"4px"},".asset-name":{ml:"4px",color:"t.third"}},f=({logo:e,code:t,name:n})=>(0,a.jsxs)(u.Z,Object.assign({sx:m},{children:[(0,a.jsx)(h.Z,{variant:"avatar",src:e,alt:"",width:16,height:16},void 0),(0,a.jsx)("div",Object.assign({className:"asset-code"},{children:t}),void 0),(0,a.jsx)("div",Object.assign({className:"asset-name"},{children:n}),void 0)]}),void 0);var p=n(86529);const g=({value:e,onChange:t,getI18n:n})=>{const r=(0,d.v8)(),s=(0,i.useCallback)((e=>{const t=r.find((t=>t.code===e));return t?(0,a.jsx)(f,Object.assign({},t),void 0):null}),[r]);return(0,i.useEffect)((function(){r.length&&!r.find((t=>t.code===e))&&t(r.find((e=>e.code===p.J$))?p.J$:r[0].code)}),[e,r,t]),(0,a.jsx)(l.Z,Object.assign({label:n("Coin",{defaultValue:"Coin"}),hideSearch:!0,onChange:e=>{t(e)},size:"lg",value:e,renderValue:s},{children:r.map((e=>(0,a.jsx)(c.W,Object.assign({value:e.code},{children:(0,a.jsx)(f,Object.assign({},e),void 0)}),e.code)))}),void 0)};var x=n(47535);const v={display:"flex",flexDirection:"column",justifyContent:"space-between",flex:1,".footer":{mt:"52px",textAlign:"right"},".confirm":{height:40,width:["100%",164]},".bn-sdd-noResults":{color:"t.secondary"},".amount-label":{justifyContent:"space-between",alignItems:"center",mb:"4px",lineHeight:"32px",display:"flex"},".amount-info":{color:"t.secondary",fontSize:"14px",mt:"32px"}},b={display:"flex",justifyContent:"space-between",gap:"16px",button:{width:"100% !important"}},w=({available:e,maxWithdraw:t=-1,residualDeposit:n=-1,onChangeCoin:l,onConfirm:c,defaultCoin:u=p.J$,bottom:h=null,top:m=null,suffixFields:f=[],type:w,getI18n:j,sx:y={},disabled:C,confirmLabel:_,prefixButtons:O=[]})=>{const[Z,S]=(0,i.useState)(""),[E,N]=(0,i.useState)(u),I=(0,d.W4)(E),k=(0,o.GW)(e,I).toString();let W=Number(k);t>=0?W=Math.min(Number(k),t):n>=0&&(W=Math.min(W,n));const V=C||!t||!Number(e)||!Number(Z)||Number(Z||0)>W;return(0,a.jsxs)(r.Z,Object.assign({sx:Object.assign(Object.assign({},v),y)},{children:[m,(0,a.jsxs)("div",{children:[f.map(((e,t)=>(0,a.jsx)(r.Z,Object.assign({mt:"24px"},{children:e}),t))),(0,a.jsx)(r.Z,Object.assign({mt:"24px"},{children:(0,a.jsx)(g,{value:E,onChange:e=>{l(e),N(e)},getI18n:j},void 0)}),void 0),(0,a.jsx)(r.Z,Object.assign({mt:"24px"},{children:(0,a.jsx)(x.Z,{maxWithdraw:t,value:Z,onChange:S,available:k,asset:E,type:w,getI18n:j,precision:I},void 0)}),void 0)]},void 0),h,(0,a.jsxs)(r.Z,Object.assign({className:"footer",sx:O.length>0?b:null},{children:[O.length>0&&O,(0,a.jsx)(s.Z,Object.assign({disabled:V,onClick:()=>c({coin:E,amount:Z}),className:"confirm"},{children:_||j("Confirm")}),void 0)]}),void 0)]}),void 0)}},84977:(e,t,n)=>{n.d(t,{Y:()=>l});var a=n(52322),i=n(2784),r=n(37745),s=n(64296),o=n(56218);const l=({label:e,getI18n:t,onChangeType:n})=>{const{tradeType:l,setTradeType:c}=(0,o.Gt)(),d=(0,i.useMemo)((()=>[{label:t("dex-trade-type-spot",{defaultValue:"Spot"}),value:`${o.v3.Spot}`},{label:t("dex-trade-type-futures",{defaultValue:"Futures"}),value:`${o.v3.Futures}`}]),[t]),u=(0,i.useCallback)((e=>{const t=d.find((t=>t.value===e));return t&&t.label||""}),[d]),h=(0,i.useCallback)((e=>{c(Number(e)),setTimeout((()=>{n&&n()}))}),[]);return(0,a.jsx)(r.Z,Object.assign({size:"lg",renderValue:u,value:`${l}`,onChange:h,hideSearch:!0,label:e},{children:d.map((({value:e,label:t})=>(0,a.jsx)(s.W,Object.assign({value:`${e}`},{children:t}),`${e}`)))}),void 0)}},83362:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Z});var a=n(52322),i=n(2784),r=n(28316),s=n(89314),o=n(62409),l=n(76635),c=n(21209),d=n(48658),u=n(22944),h=n(19076),m=n(3185),f=n(93603),p=n(33411),g=n(88795),x=n(22292),v=n(86529),b=n(76644),w=n(84977),j=n(56218),y=n(47535),C=function(e,t,n,a){return new(n||(n=Promise))((function(i,r){function s(e){try{l(a.next(e))}catch(e){r(e)}}function o(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((a=a.apply(e,t||[])).next())}))};const _=Object.assign(Object.assign({},g.i),{height:["100%","auto"]}),O=({visible:e,onClose:t,defaultCoin:n,getI18n:g,refreshBalance:b=(()=>null),sx:O={},dialogSx:Z={},unlimitWithdrawAssets:S=[]})=>{const[E]=(0,p.WS)(),{chainId:N}=(0,f.dc)(),I=(0,i.useRef)(n||v.J$),k=(0,j.c0)(),[W,V]=(0,i.useState)(0),M=(0,j.r9)(),[$,z]=(0,i.useState)(0),R=(0,i.useMemo)((()=>(0,l.debounce)((()=>C(void 0,void 0,void 0,(function*(){if(e){let e=yield(0,s.yd)({assetName:I.current},k);if(!k){const{data:{chainWithdrawLimit:t}}=yield(0,o.zZ)({currency:I.current,chainId:N});e=Math.min(e,Number(t))}if(S.includes(I.current)||k)(0,r.unstable_batchedUpdates)((()=>{V(e),z(-1)}));else{const{data:{userRemainingLimit:t,totalRemainingLimit:n}}=yield(0,o.pp)(!1);(0,r.unstable_batchedUpdates)((()=>{V(e),z(Math.min(t,n)||0)}))}}}))),500)),[I,e,k,N]),T=(0,i.useCallback)((e=>{I.current=e||v.J$,e?R():(V(0),z(-1))}),[R]);(0,i.useEffect)((()=>{e&&T(n||v.J$)}),[e,n,T]);const L=(0,i.useCallback)((({coin:e,amount:n})=>C(void 0,void 0,void 0,(function*(){if(E)try{yield E.checkExchangeBalance(e,n),E.withdraw(e,n,{afterWithdraw:b}),t()}catch(e){if(e.i18n){const t=e;(0,u.i)({message:g(t.i18n,t.defaultI18n),okText:g("dex-dialog-ok","Ok"),cancelText:""})}}}))),[E,t]),P=(0,i.useMemo)((()=>M?[(0,a.jsx)(w.Y,{label:g("dex-withdraw-from","Withdraw from"),getI18n:g,onChangeType:R},"tradeType")]:[]),[g]);return(0,a.jsxs)(c.Z,Object.assign({sx:Object.assign(Object.assign({},_),Z),visible:e},{children:[(0,a.jsxs)(d.Z,Object.assign({variant:"headline6",className:"title"},{children:[g("Withdraw",{defaultValue:"Withdraw"}),(0,a.jsx)(m.Z,{className:"close",onClick:t},void 0)]}),void 0),(0,a.jsx)(x.Z,{available:W,maxWithdraw:$,onConfirm:L,onChangeCoin:T,defaultCoin:n||v.J$,getI18n:g,type:y.C.Withdraw,bottom:(0,a.jsx)(h.Z,Object.assign({mt:"md",variant:"info"},{children:g("wallet-reject-alert",{defaultValue:'if you click on the "reject" operation, your assets will be returned after 10 minutes.'})}),void 0),suffixFields:P,sx:O},void 0)]}),void 0)},Z=e=>{var{tradeType:t=j.v3.Futures,isSupportSpot:n=!0,sourceCode:i}=e,r=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]])}return n}(e,["tradeType","isSupportSpot","sourceCode"]);return(0,a.jsx)(b.m,{children:(0,a.jsx)(j.B9,Object.assign({tradeType:t,isSupportSpot:n,visible:r.visible,sourceCode:i},{children:(0,a.jsx)(O,Object.assign({},r),void 0)}),void 0)},void 0)}},88795:(e,t,n)=>{n.d(t,{i:()=>a});const a={padding:"18px 24px 24px",width:["100%",420],height:["100%","auto"],minHeight:"400px",display:"flex",flexDirection:"column",bg:"modalBg",".title":{color:"t.primary",display:"flex",alignItems:"center",justifyContent:"space-between",pb:18,".close":{color:"icons.close",width:24,height:24,cursor:"pointer","&:hover":{color:"t.third"}}}}},31843:(e,t,n)=>{n.d(t,{w:()=>s});var a=n(65866);const i=/^\d+\.?\d*|%$/,r=/^0+(?=\d)/,s=({oldValue:e,maxValue:t,maxLength:n,precision:s})=>o=>!i.test(o)&&""!==o||isNaN(Number(o))?e:(o=o.replace(r,""),(0,a.N3)(o)>s&&(o=o.replace(new RegExp(`^(\\d*\\.\\d{${s}})\\d*`),"$1")),n&&o.split(".")[0].length>n&&(o=e),0===s&&(o=o.replace(".","")),t&&Number(o)>t&&(o=t.toString()),o)},65866:(e,t,n)=>{n.d(t,{GW:()=>d,HV:()=>u,N3:()=>l,uf:()=>c});var a=n(30733),i=n.n(a),r=n(33470);const s=/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/,o=i()(((e,t)=>new RegExp(`\\d(?=(\\d{${t||3}})+${e>0?"\\.":"$"})`,"g")),((...e)=>e.join(","))),l=e=>{const t=`${e}`.match(s);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0},c=(e,t,n=3)=>{e="number"==typeof e?e:+e;const a=o(t,n);return e.toFixed(Math.max(0,~~t)).replace(a,"$&,")},d=(e,t=2,n)=>((e,t,n="round",a=!1)=>{const i=e||0;let r;const s=Math.pow(10,t);let o=(+i+1/Math.pow(10,t+3))*s;if("string"==typeof n){const e=2;o=parseInt(""+o*Math.pow(10,e),10)/Math.pow(10,e),l=n,r=(()=>{if(Math[l])return Math[l];throw new Error("getRoundFunc called with unknown type")})()}else r=n;var l;if("function"!=typeof r)throw new Error("decRound unknown rounding func");return a?c(r(o)/s,t):(r(o)/s).toFixed(t)})(e,t,"floor",n),u=(e,t)=>(0,r.Jp)(e).toFixed(Math.min(8,t),1)}}]);