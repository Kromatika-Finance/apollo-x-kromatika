"use strict";(self.webpackChunkcloud_trade_sdk=self.webpackChunkcloud_trade_sdk||[]).push([[677],{3677:(e,t,i)=>{i.r(t),i.d(t,{default:()=>it});var s=i(52322),n=i(2784),o=i(39727),r=i(15763),a=i(52613),l=i(35635),d=i(44520),c=i(45455),u=i.n(c),g=i(78458),p=i(24918),x=i(70993),y=i(37147),h=i(98492),m=i(36461),v=i(82696),j=i(72869),b=i(42166),O=i(4673),f=i(20629),C=i(66747),k=i(81345),P=i(5848),S=i(38261),Z=i(31161);const T=(0,O.nM)(),w=e=>T?(({symbol:e,insertTime:t,side:i,origType:s,type:n,price:o,origQty:r,executedQty:a,stopPrice:l,workingType:d,activatePrice:c,avgPrice:u,priceRate:g})=>{var p;const{getI18n:y}=(0,S.Z)(),{isCoinUnit:P}=(0,Z.Q)(),{getI18n:T}=(0,x.yk)(),w=(0,h.AM)()[e]||{},{equalQtyPrecision:V,pricePrecision:N,quantityPrecision:I,marginAsset:M,contractVal:R=100}=w,{tickers:A={}}=(0,m.s)((0,O.BN)())||{},{lastPrice:B}=A[e]||{},F=(0,f.i)({side:i,type:s}),$=Number(l)||Number(o),E=(0,v.uf)($,N);let L=F&&$&&E?`${y(null===(p=C.HZ[d])||void 0===p?void 0:p.replace(/\s/g,"-"),{defaultValue:C.HZ[d]})} \r\n${[F,E].join(" ")}`:O.GR;Number(c)&&(L=`${T("activationPrice",{defaultValue:"Activation Price"})} \r\n${["BUY"===i?"<=":">=",(0,v.uf)(c,N)].join(" ")}`);const z=C.Y1.includes(n)?O.GR:(0,v.uf)(o,N),H=T("Cont",{defaultValue:"Cont"}),D=C.cQ.includes(n)?l:"TRAILING_STOP_MARKET"===n?c||B:o;let _,Y=e;return w&&(_=(0,j.H)(w,T),Y=_.shortName),{nextDate:(0,b.v)(new Date(t),"yyyy-MM-dd hh:mm:ss"),nextPair:Y,symbolName:_,nextType:y(`type-${n}`,{defaultValue:n})||n,nextPrice:z,nextAmount:P?`${(0,k.unitChangeCoinQty)({quantity:r,contractVal:R,price:D,precision:V})} ${M}`:`${(0,v.uf)(r,I)} ${H}`,nextFilled:P?`${(0,k.unitChangeCoinQty)({quantity:a,contractVal:R,price:u,precision:V})} ${M}`:`${(0,v.uf)(a,I)} ${H}`,nextTriggerConditions:L}})(e):(({symbol:e,insertTime:t,side:i,origType:s,type:n,price:o,origQty:r,executedQty:a,stopPrice:l,workingType:d,activatePrice:c,avgPrice:u})=>{var g;const{getI18n:p}=(0,S.Z)(),{getI18n:y}=(0,x.yk)(),k=(0,h.AM)()[e]||{},{getFormatedQuantity:Z}=(0,P.s7)(k),{pricePrecision:T,quantityPrecision:w}=k,{tickers:V={}}=(0,m.s)((0,O.BN)())||{},{lastPrice:N}=V[e]||{},I=(0,f.i)({side:i,type:s}),M=Number(l)||Number(o),R=(0,v.uf)(M,T);let A=I&&M&&R?`${p(null===(g=C.HZ[d])||void 0===g?void 0:g.replace(/\s/g,"-"),{defaultValue:C.HZ[d]})} \r\n${[I,R].join(" ")}`:O.GR;Number(c)&&(A=`${y("activationPrice",{defaultValue:"Activation Price"})} \r\n${["BUY"===i?"<=":">=",(0,v.uf)(c,T)].join(" ")}`);const B=C.Y1.includes(n)?O.GR:(0,v.uf)(o,T),F=C.cQ.includes(s)?l:"TRAILING_STOP_MARKET"===n?c||N:o;let $,E=e;return k&&($=(0,j.H)(k,y),E=$.shortName),{nextDate:(0,b.v)(new Date(t),"yyyy-MM-dd hh:mm:ss"),nextPair:E,symbolName:$,nextType:p(`type-${n}`,{defaultValue:n})||n,nextPrice:B,nextAmount:Z({quantity:r,price:F,qtyPrecision:w}),nextFilled:Z({quantity:a,price:u,qtyPrecision:w}),nextTriggerConditions:A}})(e);var V=i(76940),N=i(68075),I=i(61750),M=i(14202),R=function(e,t,i,s){return new(i||(i=Promise))((function(n,o){function r(e){try{l(s.next(e))}catch(e){o(e)}}function a(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((s=s.apply(e,t||[])).next())}))};const A=(0,O.nM)(),B=(0,O.nM)(),F=e=>B?function({symbol:e,side:t,quantity:i,type:s,price:n,stopPrice:o,avgPrice:r,closePosition:a}){const{getI18n:l}=(0,S.Z)(),{getI18n:d}=(0,x.yk)(),{isCoinUnit:c}=(0,Z.Q)(),u=(0,h.AM)()[e]||{},{equalQtyPrecision:g,marginAsset:p,contractVal:y=100,quantityPrecision:m,close:j}=u,b=d("Cont",{defaultValue:"Cont"}),O=l("closePosition",{defaultValue:"Close Positioin"}),f=C.cQ.includes(s)?o:"MARKET"===s?r||j:n,P=c?`${(0,k.unitChangeCoinQty)({quantity:i,contractVal:y,price:f,precision:g})} ${p}`:`${(0,v.uf)(i,m)} ${b}`;return{amount:a?O:P,sideProps:"BUY"===t?{color:"buy",children:l("sideBuy",{defaultValue:"Buy"})}:{color:"sell",children:l("sideSell",{defaultValue:"Sell"})}}}(e):function({symbol:e,side:t,quantity:i,type:s,price:n,stopPrice:o,avgPrice:r,closePosition:a}){const{getI18n:l}=(0,S.Z)(),d=(0,h.AM)()[e]||{},{getFormatedQuantity:c}=(0,P.s7)(d),{quantityPrecision:u,close:g}=d,p=l("closePosition",{defaultValue:"Close Positioin"}),x=c({quantity:i,price:C.cQ.includes(s)?o:"MARKET"===s?r||g:n,qtyPrecision:u});return{amount:a?p:x,sideProps:"BUY"===t?{color:"buy",children:l("sideBuy",{defaultValue:"Buy"})}:{color:"sell",children:l("sideSell",{defaultValue:"Sell"})}}}(e);var $=i(2724),E=i(8638),L=i(86370),z=i(20512),H=i(50634),D=i(39877),_=i(66264),Y=i(23299),q=i(49967),Q=i(84183);const G=({mainOrder:e,subOrders:t})=>{const i="light"===(0,h.Fg)(),n=2===(null==t?void 0:t.length);return(0,s.jsxs)(s.Fragment,{children:[e,(0,s.jsx)("svg",Object.assign({width:"100%",height:"100%",viewBox:"0 0 504 54",fill:"none",style:{margin:"0 auto -5px"},xmlns:"http://www.w3.org/2000/svg"},{children:n?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("path",{d:"M252 0 L252 27 L122 27 L122 54",style:{stroke:i?"#F5F5F5":"#474D57",strokeWidth:"3px"}},void 0),(0,s.jsx)("path",{d:"M252 27 L382 27 L382 54",style:{stroke:i?"#F5F5F5":"#474D57",strokeWidth:"3px"}},void 0)]},void 0):(0,s.jsx)("path",{d:"M252 0 L252 54",style:{stroke:i?"#F5F5F5":"#474D57",strokeWidth:"3px"}},void 0)}),void 0),(0,s.jsx)(l.Z,Object.assign({justifyContent:n?"space-between":"center"},{children:t}),void 0)]},void 0)},K=({mainOrder:e,subOrders:t})=>{const i=2===t.length?380:190,n="light"===(0,h.Fg)();return(0,s.jsxs)(s.Fragment,{children:[e,(0,s.jsxs)(l.Z,Object.assign({justifyContent:"start"},{children:[(0,s.jsx)("svg",Object.assign({width:"30",height:"100%",fill:"none",viewBox:`0 0 30 ${i}`,xmlns:"http://www.w3.org/2000/svg"},{children:2===(null==t?void 0:t.length)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("path",{d:`M15 0 L15 ${i/4} L30 ${i/4}`,style:{stroke:n?"#F5F5F5":"#474D57",strokeWidth:"4px"}},void 0),(0,s.jsx)("path",{d:`M15 ${i/4} L15 ${3*i/4} L30 ${3*i/4}`,style:{stroke:n?"#F5F5F5":"#474D57",strokeWidth:"4px"}},void 0)]},void 0):(0,s.jsx)("path",{d:`M15 0 L15 ${i/2} L30 ${i/2}`,style:{stroke:n?"#F5F5F5":"#474D57",strokeWidth:"4px"}},void 0)}),void 0),(0,s.jsx)(a.Z,Object.assign({sx:{width:"calc(100% - 30px)"}},{children:t}),void 0)]}),void 0)]},void 0)},U=e=>(0,s.jsx)($.Z,{children:({isMobile:t})=>t?(0,s.jsx)(K,Object.assign({},e),void 0):(0,s.jsx)(G,Object.assign({},e),void 0)},void 0);var W=i(72779),X=i.n(W),J=i(95970),ee=i(97398),te=i(19107);const ie=e=>{var t;return null===(t=null==e?void 0:e.toLowerCase())||void 0===t?void 0:t.replace(/_/g,"-")},se=["LIMIT","STOP","TAKE_PROFIT"],ne={mx:"auto",display:"flex",flexDirection:"column",alignItems:"center",".description":{color:"t.primary",mb:"10px",display:"inline-block"},".card":{width:["100%","284px"],borderRadius:"2px",border:"1px solid",borderColor:"lines.border",fontSize:"14px",lineHeight:"16px","&.orderA":{".orderType":{mt:"0px",mb:"0px",".type":{color:"t.third"}}},"&.orderB":{mr:"auto",ml:"0px","&.only":{ml:"auto"}},"&.orderC":{mr:"0px",ml:"auto"}},".title":{px:"16px",py:"8px",backgroundColor:"dialog.panelBg",color:"primary"},".content":{px:"16px",paddingTop:"8px",paddingBottom:"16px"},".row":{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",marginTop:"xs","&.editable":{marginTop:"4px"}},".orderType":{mt:"sm",mb:"sm",lineHeight:"19px",".type":{color:"t.primary"},".status":{color:"t.third"}}},oe={height:"16px",minHeight:"16px",py:"3px",border:"none",color:"t.primary",svg:{height:"16px",right:"-6px",marginTop:"4px"},backgroundColor:"transparent",justifyContent:"end"},re=({order:e={},subOrderLength:t})=>{const{getI18n:i}=(0,S.Z)(),{getI18n:o}=(0,x.yk)(),{type:r,status:l,price:d,reduceOnly:c}=e,{useStrategyOrder:u}=(0,n.useContext)(L.Z),{amount:g,sideProps:p}=u(e);return(0,s.jsxs)(a.Z,Object.assign({sx:ne},{children:[(0,s.jsx)("div",Object.assign({className:"description"},{children:1===t?i("orderA-OTO-description",{defaultValue:"If order A executes, orders B will be placed."}):i("orderA-OTOCO-description",{defaultValue:"If order A executes, orders B and C will be placed."})}),void 0),(0,s.jsxs)("div",Object.assign({className:"card orderA"},{children:[(0,s.jsx)("div",Object.assign({className:"title"},{children:i("orderA",{defaultValue:"Order A"})}),void 0),(0,s.jsxs)("div",Object.assign({className:"content"},{children:[(0,s.jsxs)("div",Object.assign({className:"row orderType"},{children:[(0,s.jsx)(z.Z,Object.assign({color:"t.third",className:"type"},{children:i(`type-${r}`,{defaultValue:r})}),void 0),(0,s.jsx)(z.Z,Object.assign({fontSize:0,color:"t.third",className:"status"},{children:i(`status-${ie(l)}`,{defaultValue:l})}),void 0)]}),void 0),(0,s.jsxs)("div",Object.assign({className:"row"},{children:[(0,s.jsx)(z.Z,Object.assign({color:"t.third"},{children:i("side",{defaultValue:"Side"})}),void 0),(0,s.jsx)(z.Z,Object.assign({},p),void 0)]}),void 0),(0,s.jsxs)("div",Object.assign({className:"row"},{children:[(0,s.jsx)(z.Z,Object.assign({color:"t.third"},{children:i("amount",{defaultValue:"Amount"})}),void 0),(0,s.jsx)(z.Z,Object.assign({color:"t.primary"},{children:g}),void 0)]}),void 0),se.includes(r)&&(0,s.jsxs)("div",Object.assign({className:"row"},{children:[(0,s.jsx)(z.Z,Object.assign({color:"t.third"},{children:i("price",{defaultValue:"Price"})}),void 0),(0,s.jsx)(z.Z,Object.assign({color:"t.primary"},{children:d}),void 0)]}),void 0),(0,s.jsxs)("div",Object.assign({className:"row"},{children:[(0,s.jsx)(z.Z,Object.assign({color:"t.third"},{children:i("reduceOnly",{defaultValue:"Reduce Only"})}),void 0),(0,s.jsx)(z.Z,Object.assign({color:"t.primary"},{children:o(c?"openOrder-true":"openOrder-false",{defaultValue:c?"True":"False"})}),void 0)]}),void 0)]}),void 0)]}),void 0)]}),void 0)},ae=({step:e,tickSizePrecision:t,order:i,changeOrder:o,index:r,subOrderLength:l})=>{const{getI18n:d}=(0,S.Z)(),{getI18n:c}=(0,x.yk)(),{type:u,status:g,stopPrice:p,workingType:y,price:h,reduceOnly:m}=i||{},{useStrategyOrder:v}=(0,n.useContext)(L.Z),{amount:j,sideProps:b}=v(i),O="PENDING"===g,f={CONTRACT_PRICE:d("Last-Price",{defaultValue:"Last Price"}),MARK_PRICE:d("Mark-Price",{defaultValue:"Mark Price"})},C=(0,n.useCallback)((e=>{(0,ee._p)(e,(e=>o(Object.assign(Object.assign({},i),{stopPrice:e}),r)),"",t)}),[o,i,t,r]),k=(0,n.useCallback)((e=>o(Object.assign(Object.assign({},i),{workingType:e}),r)),[o,i,r]);return(0,s.jsxs)(a.Z,Object.assign({sx:ne},{children:[0===r&&(0,s.jsx)("div",Object.assign({className:"description"},{children:2===l?d("orderB-OTOCO-description",{defaultValue:"If order B executes cancel order C."}):""}),void 0),1===r&&(0,s.jsx)("div",Object.assign({className:"description"},{children:2===l?d("orderC-OTOCO-description",{defaultValue:"If order C executes cancel order B."}):""}),void 0),(0,s.jsxs)("div",Object.assign({className:X()({orderB:0===r,orderC:1===r,only:1===l,card:!0})},{children:[(0,s.jsx)("div",Object.assign({className:"title"},{children:d(0===r?"orderB":"orderC",{defaultValue:0===r?"Order B":"Order C"})}),void 0),(0,s.jsxs)("div",Object.assign({className:"content"},{children:[(0,s.jsxs)("div",Object.assign({className:"row orderType"},{children:[(0,s.jsx)(z.Z,Object.assign({fontSize:2,color:"t.primary"},{children:d(`type-${u}`,{defaultValue:u})}),void 0),(0,s.jsx)(z.Z,Object.assign({fontSize:0,color:"t.third"},{children:d(`status-${ie(g)}`,{defaultValue:g})}),void 0)]}),void 0),(0,s.jsxs)("div",Object.assign({className:"row"},{children:[(0,s.jsx)(z.Z,Object.assign({color:"t.third"},{children:d("side",{defaultValue:"Side"})}),void 0),(0,s.jsx)(z.Z,Object.assign({},b),void 0)]}),void 0),(0,s.jsxs)("div",Object.assign({className:"row"},{children:[(0,s.jsx)(z.Z,Object.assign({color:"t.third"},{children:d("amount",{defaultValue:"Amount"})}),void 0),(0,s.jsx)(z.Z,Object.assign({color:"t.primary"},{children:j}),void 0)]}),void 0),se.includes(u)&&(0,s.jsxs)("div",Object.assign({className:"row"},{children:[(0,s.jsx)(z.Z,Object.assign({color:"t.third"},{children:d("price",{defaultValue:"Price"})}),void 0),(0,s.jsx)(z.Z,Object.assign({color:"t.primary"},{children:h}),void 0)]}),void 0),(0,s.jsxs)("div",Object.assign({className:"row "+(O?"editable":"")},{children:[(0,s.jsx)(z.Z,Object.assign({color:"t.third"},{children:d("triggerPrice",{defaultValue:"Trigger Price"})}),void 0),O?(0,s.jsx)(J.Z,{type:"number",variant:"outline",step:e,value:p,onChange:C,boxProps:{sx:{height:"24px",lineHeight:1,mt:0,pl:[0,"minor"],fontSize:"12px",border:"none",backgroundColor:"dialog.panelBg"}},sx:{textAlign:"right"}},void 0):(0,s.jsx)(z.Z,Object.assign({color:"t.primary"},{children:p}),void 0)]}),void 0),(0,s.jsxs)("div",Object.assign({className:"row "+(O?"editable":"")},{children:[(0,s.jsx)(z.Z,Object.assign({color:"t.third"},{children:d("trigger",{defaultValue:"Trigger"})}),void 0),O?(0,s.jsx)(te.Z,{sx:oe,workingType:y,changeWorkingType:k},void 0):(0,s.jsx)(z.Z,Object.assign({color:"t.primary"},{children:f[y]}),void 0)]}),void 0),(0,s.jsxs)("div",Object.assign({className:"row"},{children:[(0,s.jsx)(z.Z,Object.assign({color:"t.third"},{children:d("reduceOnly",{defaultValue:"Reduce Only"})}),void 0),(0,s.jsxs)(z.Z,Object.assign({color:"t.primary"},{children:[" ",c(m?"openOrder-true":"openOrder-false",{defaultValue:m?"True":"False"})]}),void 0)]}),void 0)]}),void 0)]}),void 0)]}),void 0)};var le=function(e,t,i,s){return new(i||(i=Promise))((function(n,o){function r(e){try{l(s.next(e))}catch(e){o(e)}}function a(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((s=s.apply(e,t||[])).next())}))};const de=n.memo((e=>{const{getI18n:t,i18n:{language:i}}=(0,S.Z)(),{isMobile:o,visible:r,order:c={},onClose:g}=e,x=(0,h.AM)()[c.symbol]||{},y=(0,Q.p)(x.tickSize),m=x.tickSize,v=!u()(c)&&r,[j,b]=(0,n.useState)(!1),[O,f]=(0,n.useState)({}),[C,k]=(0,n.useState)({}),[P,Z]=(0,n.useState)([]),T=(0,n.useCallback)(((e,t)=>{const i=P.map(((i,s)=>s===t?e:i));Z(i)}),[P]),w=(0,n.useCallback)((()=>le(void 0,void 0,void 0,(function*(){const{strategyId:e,strategyType:t}=c;b(!0);const i=yield(0,_.Su)({strategyId:e,strategyType:t});b(!1);const{success:s,data:n}=i;s&&n&&(f(n),k(n.subOrders[0]),"OTOCO"===n.strategyType?Z(n.subOrders.slice(1,3)):Z(n.subOrders.slice(1,2)))}))),[c]);(0,n.useEffect)((()=>{v?w():(f({}),k({}),Z([]))}),[w,v]);const{enqueueNotification:V}=(0,p.Z)(),N=(0,n.useCallback)((e=>le(void 0,void 0,void 0,(function*(){"STOP_MARKET"!==e.type&&"TAKE_PROFIT_MARKET"!==e.type||delete e.price,delete e.status;const{success:s,message:n}=yield(0,_.ZX)(e,{language:i});s&&V({message:t("update-strategy-suc"),variant:"success"})}))),[t,i,V]),I=(0,n.useCallback)((()=>{const{strategyType:e}=O,t=[];P.forEach(((i,s)=>{(function(e,t){return Number(t.stopPrice)!==Number(e.stopPrice)||t.workingType!==e.workingType})(i,O.subOrders[s+1])&&t.push(N(Object.assign(Object.assign({},i),{strategyType:e})))})),Promise.all(t).finally(g)}),[g,O,P,N]);return(0,s.jsxs)(H.Z,Object.assign({open:v,onCloseIconClick:g,sx:{width:["100%","640px"],height:["100%","auto"]},contentSx:{height:["100%","auto"],p:0}},{children:[(0,s.jsx)(a.Z,Object.assign({as:"h3",__css:{borderBottom:["none","2px solid"],borderBottomColor:["transparent","primary"],px:"md",pt:["50px","sm"],pb:["6px","sm"],textAlign:["unset","center"],fontSize:["xp","md"],lineHeight:"20px",fontWeight:"medium"}},{children:t("strategyOrder",{defaultValue:"Strategy Order"})}),void 0),(0,s.jsxs)(a.Z,Object.assign({sx:{height:"calc(100% - 76px)",overflowY:"auto",p:"md"}},{children:[(0,s.jsxs)(a.Z,Object.assign({sx:{minHeight:"400px"}},{children:[(0,s.jsx)(q.Z,{inner:!0,show:j},void 0),(0,s.jsx)(U,{mainOrder:(0,s.jsx)(re,{order:C,subOrderLength:P.length},void 0),subOrders:P.map(((e,t)=>(0,s.jsx)(ae,{index:t,tickSizePrecision:y,step:Number(m),order:e,changeOrder:T,subOrderLength:P.length},e.strategySubId)))},void 0),(0,s.jsxs)(l.Z,Object.assign({alignItems:"start",mt:"md",color:"t.third"},{children:[(0,s.jsx)(Y.Z,{size:32,mr:"xs",height:"0.5em"},void 0),(0,s.jsx)(z.Z,Object.assign({fontSize:"14px",lineHeight:"16px"},{children:"OTOCO"===O.strategyType?t("strategyOrderTip"):t("strategyOrderTip2")}),void 0)]}),void 0)]}),void 0),o&&(0,s.jsx)(a.Z,{sx:{width:"100%",height:"64px"}},void 0),(0,s.jsx)(D.y,Object.assign({sx:{bg:"popupBg"}},{children:(0,s.jsxs)(l.Z,{children:[(0,s.jsx)(d.Z,Object.assign({flex:"auto",variant:"outline",sx:{boxShadow:"outlineBtnShadow",color:"t.primary",mr:"md",height:"40px"},onClick:g},{children:t("cancel",{defaultValue:"Cancel"})}),void 0),(0,s.jsx)(d.Z,Object.assign({flex:"auto",onClick:I,height:"40px"},{children:t("confirm",{defaultValue:"Confirm"})}),void 0)]},void 0)}),void 0)]}),void 0)]}),void 0)}));var ce=i(289),ue=i(41268);const ge=n.memo((({order:e,onClose:t})=>{const{symbol:i,side:o,positionSide:r,modifyParams:a={},onConfirm:l}=e,{positionMode:d=!1}=(0,h.F7)(),{getI18n:c}=(0,x.yk)(),[u,g]=(0,ce.g)(O.Zv,O.Xd),{limitPrice:p,qty:y,amendedField:m}=a,v="BUY"===o?"buy":"sell",j=(({side:e,positionSide:t,getFutI18n:i,positionMode:s})=>{const n=i("buyLong",{defaultValue:"Buy/Long"}),o=i("sellShort",{defaultValue:"Sell/Short"}),r=i("OpenLong",{defaultValue:"Open Long"}),a=i("OpenShort",{defaultValue:"Open Short"}),l=i("CloseShort",{defaultValue:"Close Short"}),d=i("CloseLong",{defaultValue:"Close Long"});let c;return c=s?"BUY"===e?"SHORT"===t?l:r:"SHORT"===t?a:d:"BUY"===e?n:o,c})({side:o,positionSide:r,getFutI18n:c,positionMode:d}),b=(0,n.useCallback)((()=>{const e=Object.assign(Object.assign({},u),{needConfirm:!1});g(e)}),[g,u]);return(0,s.jsx)(ue.Z,{symbol:i,title:j,color:v,amendedField:m,isMarket:!1,limitPrice:p,qty:y,isClose:!1,onClose:t,onConfirm:l,closeTip:b,orderSide:o},void 0)}));var pe=i(83166),xe=i(86778);const ye=n.memo((({hasData:e})=>{const{getI18n:t}=(0,S.Z)(),{getI18n:i}=(0,x.yk)(),{handleHideOtherPairs:o,checked:r,actionCancel:a}=(0,n.useContext)(L.Z);return(0,s.jsxs)("div",Object.assign({className:"action-bar"},{children:[(0,s.jsxs)(l.Z,Object.assign({sx:{alignItems:"center",color:"t.third"},onClick:()=>o(!r)},{children:[(0,s.jsx)(xe.Z,{name:"hideOtherSymbol",checked:r,onChange:()=>!1},void 0),(0,s.jsx)(z.Z,Object.assign({variant:"caption",sx:{userSelect:"none"}},{children:i("hideOtherSymbol")}),void 0)]}),void 0),(0,s.jsx)(z.Z,Object.assign({onClick:e?()=>{a(0,t("actionAllMsg",{defaultValue:"Are you sure you want to cancel all?"}))}:void 0,variant:"caption",sx:{color:e?"t.yellow":"t.third"}},{children:t("action",{defaultValue:"Cancel All"})}),void 0)]}),void 0)}));var he=i(74568);const me=({children:e})=>(0,s.jsx)(z.Z,Object.assign({variant:"caption",__css:{color:"t.third"}},{children:e}),void 0),ve=e=>{var{color:t="t.primary"}=e,i=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(i[s[n]]=e[s[n]])}return i}(e,["color"]);return(0,s.jsx)(z.Z,Object.assign({variant:"captionSub",color:t},i),void 0)},je=({children:e,sx:t})=>(0,s.jsx)(l.Z,Object.assign({className:"row-item",sx:t},{children:e}),void 0),be=({orderId:e,symbolName:t,side:i,positionSide:o,nextPair:r,nextType:a,actionCancel:l})=>{const{getI18n:d}=(0,S.Z)(),c=(0,n.useCallback)((()=>{l((({orderId:t})=>e===t))}),[l,e]);return(0,s.jsxs)(je,Object.assign({sx:{pb:"10px !important"}},{children:[(0,s.jsxs)("div",Object.assign({className:"symbol-wrap"},{children:[t?(0,s.jsxs)("div",Object.assign({className:"symbolText"},{children:[(0,s.jsx)("div",Object.assign({className:"symbol"},{children:t.symbol}),void 0),(0,s.jsx)("div",{children:`${t.contractTypeI18n} ${t.deliveryDateFormat}`},void 0)]}),void 0):(0,s.jsx)("div",Object.assign({className:"symbolText"},{children:r}),void 0),(0,s.jsx)(z.Z,Object.assign({variant:"caption",sx:{color:"BUY"===i?"buy":"sell"}},{children:"BUY"===i?`${a} / ${d(`sideBuy${o}`,{defaultValue:"Buy"})}`:`${a} / ${d(`sideSell${o}`,{defaultValue:"Sell"})}`}),void 0)]}),void 0),(0,s.jsx)("div",Object.assign({className:"cancel-order",onClick:c},{children:d("cancel",{defaultValue:"Cancel"})}),void 0)]}),void 0)},Oe=({nextDate:e})=>{const{getI18n:t}=(0,S.Z)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(me,{children:t("date",{defaultValue:"Date"})},void 0),(0,s.jsx)(ve,{children:e},void 0)]},void 0)},fe=({strategyId:e,strategyType:t,actionStrategyModal:i,order:o})=>{const{getI18n:r}=(0,S.Z)(),a=("OTOCO"===t||"OTO"===t)&&e,l=(0,n.useCallback)((()=>{i(o)}),[i,o]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(me,{children:r("strategy",{defaultValue:"Strategy"})},void 0),a?(0,s.jsx)("div",Object.assign({className:"strategy-view",onClick:l},{children:r("strategyView",{defaultValue:"View"})}),void 0):(0,s.jsx)(z.Z,{children:"--"},void 0)]},void 0)},Ce=(0,n.memo)((e=>{const{orderId:t,side:i,reduceOnly:o,positionSide:r="BOTH",closePosition:a,strategyId:d,strategyType:c,timeInForce:u,type:g,activatePrice:p,priceRate:y,workingType:h}=e,{getI18n:m}=(0,S.Z)(),{getI18n:v}=(0,x.yk)(),{actionCancel:j,actionStrategyModal:b,useColumn:O}=(0,n.useContext)(L.Z),f=O(e),{symbolName:C,nextPair:k,nextFilled:P,nextDate:Z,nextPrice:T,nextAmount:w,nextType:V,nextTriggerConditions:N}=f,I=m("closePosition",{defaultValue:"Close Position"}),M=(0,n.useMemo)((()=>[{label:m("filled",{defaultValue:"Filled"}),value:P},{label:m("reduceOnly",{defaultValue:"Reduce Only"}),value:o?m("YES",{defaultValue:"YES"}):m("NO",{defaultValue:"NO"})},{label:v("orderType-postOnly",{defaultValue:"Post Only"}),value:"GTX"===u?m("YES",{defaultValue:"YES"}):m("NO",{defaultValue:"NO"})}]),[m,P,o,v,u]);return(0,s.jsxs)("div",Object.assign({className:"row-wrap"},{children:[(0,s.jsx)(be,{orderId:t,symbolName:C,side:i,positionSide:r,nextPair:k,nextType:V,actionCancel:j},void 0),(0,s.jsxs)(je,{children:[(0,s.jsx)(me,{children:m("price",{defaultValue:"Price"})},void 0),(0,s.jsx)(ve,{children:T},void 0)]},"price"),(0,s.jsxs)(je,{children:[(0,s.jsx)(me,{children:m("amount",{defaultValue:"Amount"})},void 0),(0,s.jsx)(ve,{children:a?I:w},void 0)]},"amount"),M.map((({label:e,value:t})=>(0,s.jsxs)(je,{children:[(0,s.jsx)(me,{children:e},void 0),(0,s.jsx)(ve,{children:t},void 0)]},e))),(0,s.jsxs)(je,{children:[(0,s.jsx)(me,{children:m("triggerConditions",{defaultValue:"Trigger Conditions"})},void 0),(0,s.jsxs)(l.Z,Object.assign({alignItems:"center"},{children:[(0,s.jsx)(ve,{children:N},void 0),(0,s.jsx)(he.Z,{type:g,workingType:h,activatePrice:p,priceRate:y},void 0)]}),void 0)]},"triggerConditions"),(0,s.jsx)(je,{children:(0,s.jsx)(fe,{strategyId:d,strategyType:c,actionStrategyModal:b,order:e},void 0)},"tpsl"),(0,s.jsx)(je,{children:(0,s.jsx)(Oe,{nextDate:Z},void 0)},"date")]}),void 0)})),ke=(0,n.memo)((e=>{const{orderId:t,side:i,reduceOnly:o,positionSide:r="BOTH",closePosition:a,strategyId:d,strategyType:c,timeInForce:u,type:g,activatePrice:p,priceRate:y,workingType:h}=e,{getI18n:m}=(0,S.Z)(),{getI18n:v}=(0,x.yk)(),{actionCancel:j,actionStrategyModal:b,useColumn:O}=(0,n.useContext)(L.Z),f=O(e),{symbolName:C,nextPair:k,nextFilled:P,nextDate:Z,nextPrice:T,nextAmount:w,nextType:V,nextTriggerConditions:N}=f,I=m("closePosition",{defaultValue:"Close Position"}),M=(0,n.useMemo)((()=>[{columnKey:"filled",label:m("filled",{defaultValue:"Filled"}),value:P},{columnKey:"reduceOnly",label:m("reduceOnly",{defaultValue:"Reduce Only"}),value:o?m("YES",{defaultValue:"YES"}):m("NO",{defaultValue:"NO"})},{columnKey:"postOnly",label:v("orderType-postOnly",{defaultValue:"Post Only"}),value:"GTX"===u?m("YES",{defaultValue:"YES"}):m("NO",{defaultValue:"NO"})}]),[m,P,o,v,u]);return(0,s.jsxs)("div",Object.assign({className:"row-wrap"},{children:[(0,s.jsx)(be,{orderId:t,symbolName:C,side:i,positionSide:r,nextPair:k,nextType:V,actionCancel:j},void 0),(0,s.jsxs)("div",Object.assign({className:"row-grid"},{children:[(0,s.jsxs)("div",Object.assign({className:"price"},{children:[(0,s.jsx)(me,{children:m("price",{defaultValue:"Price"})},void 0),(0,s.jsx)(ve,{children:T},void 0)]}),void 0),(0,s.jsxs)("div",Object.assign({className:"amount"},{children:[(0,s.jsx)(me,{children:m("amount",{defaultValue:"Amount"})},void 0),(0,s.jsx)(ve,{children:a?I:w},void 0)]}),void 0),M.map((({label:e,value:t,columnKey:i})=>(0,s.jsxs)("div",Object.assign({className:i},{children:[(0,s.jsx)(me,{children:e},void 0),(0,s.jsx)(ve,{children:t},void 0)]}),i))),(0,s.jsxs)("div",Object.assign({className:"triggerConditions"},{children:[(0,s.jsxs)(l.Z,Object.assign({alignItems:"center",justifyContent:"flex-end"},{children:[(0,s.jsx)(me,{children:m("triggerConditions",{defaultValue:"Trigger Conditions"})},void 0),(0,s.jsx)(he.Z,{type:g,workingType:h,activatePrice:p,priceRate:y},void 0)]}),void 0),(0,s.jsx)(ve,{children:N},void 0)]}),void 0),(0,s.jsx)("div",Object.assign({className:"tpsl"},{children:(0,s.jsx)(fe,{strategyId:d,strategyType:c,actionStrategyModal:b,order:e},void 0)}),void 0),(0,s.jsx)("div",Object.assign({className:"date"},{children:(0,s.jsx)(Oe,{nextDate:Z},void 0)}),void 0)]}),void 0)]}),void 0)})),Pe={position:"relative",flexDirection:"column",flex:"1 0",".action-bar":{display:"flex",justifyContent:"space-between",alignItems:"center",height:32,pt:10},".empty":{display:"flex",minHeight:120,alignItems:"center",justifyContent:"center",color:"t.secondary",fontSize:0},".row-wrap":{color:"t.primary",py:15,borderBottom:"1px solid",borderColor:"line","&:last-of-type":{mb:102,borderBottom:"none"},"& .row-item":{justifyContent:"space-between",alignItems:"center",py:"minor"},"& .symbol-wrap":{display:"flex",flexDirection:"column",fontSize:0,"& .symbolText":{display:"flex",alignItems:"center"},"& .symbol":{mr:"minor",fontSize:1,fontWeight:"medium"}},"& .cancel-order":{py:"minor",px:"xs",fontSize:0,color:"t.primary",bg:"line",borderRadius:"3px"},"& .strategy-view":{fontSize:0,color:"t.yellow"}}},Se={position:"relative",flexDirection:"column",height:"100%",".action-bar":{display:"flex",justifyContent:"space-between",alignItems:"center",height:32,pt:10},".empty":{display:"flex",minHeight:120,alignItems:"center",justifyContent:"center",color:"t.secondary",fontSize:0},".row-list":{height:"calc(100% - 32px)",overflow:"auto","&::-webkit-scrollbar":{display:"none"},"&::-webkit-scrollbar-thumb":{bg:"transparent"}},".row-wrap":{color:"t.primary",py:15,borderBottom:"1px solid",borderColor:"line","&:last-of-type":{mb:15,borderBottom:"none"},".row-grid":{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gridTemplateRows:"repeat(3, 1fr)",gridGap:"12px 16px",gridTemplateAreas:'"price amount filled"\n        "reduceOnly postOnly triggerConditions"\n        "tpsl date ."',"& .filled, & .triggerConditions":{textAlign:"right"}},"& .row-item":{justifyContent:"space-between",alignItems:"center"},"& .symbol-wrap":{display:"flex",alignItems:"center",fontSize:0,"& .symbolText":{display:"flex",alignItems:"center",mr:"xs"},"& .symbol":{mr:"minor",fontSize:1,fontWeight:"medium"}},"& .cancel-order":{py:"minor",px:"xs",fontSize:0,color:"t.primary",bg:"line",borderRadius:"3px"},"& .strategy-view":{fontSize:0,color:"t.yellow"}}},Ze=n.memo((({isMobile:e,outLoading:t,items:i,girdLoading:o})=>{const{emptyText:r}=(0,n.useContext)(L.Z);return(0,s.jsxs)(l.Z,Object.assign({sx:e?Pe:Se},{children:[(0,s.jsx)(q.Z,{fullScreen:!0,show:t},void 0),(0,s.jsx)(ye,{hasData:(null==i?void 0:i.length)>0},void 0),o||i&&i.length?(0,s.jsx)(s.Fragment,{children:e?i.map(((e,t)=>(0,s.jsx)(Ce,Object.assign({},e),t))):(0,s.jsx)("div",Object.assign({className:"row-list"},{children:i.map(((e,t)=>(0,s.jsx)(ke,Object.assign({},e),t)))}),void 0)},void 0):(0,s.jsx)(pe.pB,Object.assign({className:"empty"},{children:r}),void 0)]}),void 0)}));var Te=i(40844),we=i(85818),Ve=i(30322),Ne=i(76743);const Ie=n.memo((({hasData:e,headers:t=[],style:i})=>{const{actionCancel:o}=(0,n.useContext)(L.Z),{getI18n:r}=(0,S.Z)(),l=()=>{o(0,r("actionAllMsg",{defaultValue:"Are you sure you want to cancel all?"}))};return(0,s.jsx)("div",Object.assign({className:"openOrderRow header",style:i},{children:t.filter((e=>e.defaultChecked)).map((({text:t,overlay:i,key:n})=>(0,s.jsx)("div",Object.assign({className:n},{children:i?(0,s.jsx)(Ve.ZP,Object.assign({trigger:"hover",placement:"bottom-end",enablePortal:!0,overlay:e?i:null,sx:{userSelect:"none",display:"flex"}},{children:(0,s.jsxs)(a.Z,Object.assign({sx:{display:"flex",height:"24px",alignItems:"center",justifyContent:"center"}},{children:[(0,s.jsx)(d.Z,Object.assign({variant:"quiet",sz:"s",sx:{px:0,whiteSpace:"break-spaces"},onClick:e?l:void 0},{children:t}),void 0),(0,s.jsx)(Ne.Z,{size:20,sx:{color:"t.third",cursor:"pointer",display:"inline-block"}},void 0)]}),void 0)}),n):(0,s.jsx)(z.Z,Object.assign({title:t,sx:{fontSize:0,color:"t.third",display:"inline-flex",alignItems:"center",justifyContent:"flex-start"},onClick:i&&e?l:void 0},{children:t}),void 0)}),n)))}),void 0)}));var Me=i(15794),Re=i(57808);const Ae=n.memo((()=>{const{getI18n:e}=(0,x.yk)(),{handleHideOtherPairs:t,checked:i}=(0,n.useContext)(L.Z),o=e("hideOtherSymbol",{defaultValue:"Hide Other Symbol"});return(0,s.jsxs)(Re.Z,Object.assign({sx:{fontSize:[1,0],color:"t.third",cursor:["auto","auto","pointer"],lineHeight:["unset","24px","24px"]}},{children:[(0,s.jsx)(xe.Z,{checked:i,onChange:()=>t(!i)},void 0),(0,s.jsx)(z.Z,Object.assign({sx:{userSelect:"none"}},{children:o}),void 0)]}),void 0)}));var Be=i(49393),Fe=i(49287),$e=i(23187),Ee=i(70810);const Le={padding:"16px",bg:"popupBg",boxShadow:"elevation2",borderRadius:"4px",".check-header":{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"14px","& .name":{color:"t.secondary",fontWeight:"500",marginRight:"16px"}},".sort-header":{color:"t.third",display:"flex",justifyContent:"flex-start",alignItems:"center","& .back":{marginLeft:"8px",cursor:"pointer",fontSize:"12px"}}},ze=["reduceOnly","postOnly","strategy"],He=(0,n.memo)((({headers:e=[],onSort:t,onCheck:i})=>{const o=e.map((e=>Object.assign(Object.assign({},e),{value:e.key,label:e.text}))),r=o.filter((e=>e.sortable&&e.defaultChecked)).map((e=>Object.assign(Object.assign({},e),{label:e.text}))),l=o.filter((e=>e.checkable));l.sort(((e,t)=>ze.indexOf(e.value)-ze.indexOf(t.value)));const{getI18n:d}=(0,x.yk)(),[c,u]=(0,n.useState)("check");return"check"===c?(0,s.jsxs)(a.Z,Object.assign({__css:Le,onClick:e=>e.stopPropagation()},{children:[(0,s.jsxs)("div",Object.assign({className:"check-header"},{children:[(0,s.jsxs)(z.Z,Object.assign({variant:"captionSub",className:"name"},{children:[" ",d("openOrder-preferenceTitle",{defaultValue:"Open Orders Preference"})]}),void 0),(0,s.jsx)("div",Object.assign({className:"action"},{children:(0,s.jsx)($e.Z,Object.assign({variant:"defaultLink",__css:{cursor:"pointer"},onClick:e=>{e.stopPropagation(),u("sort")}},{children:d("positions-preferenceSort")}),void 0)}),void 0)]}),void 0),(0,s.jsx)("div",Object.assign({className:"list"},{children:(0,s.jsx)(Be.Z,{options:l,getValue:e=>{const s=Object.keys(e)[0],n=e[s];i&&i(l.map((e=>e.value===s?Object.assign(Object.assign({},e),{defaultChecked:n}):e)).filter((e=>e.defaultChecked)).map((e=>e.value)));let o=r.map((e=>e.value));n?o.push(s):o=o.filter((e=>e!==s)),t&&t(o.concat(s))}},void 0)}),void 0)]}),void 0):(0,s.jsxs)(a.Z,Object.assign({__css:Le,onClick:e=>e.stopPropagation()},{children:[(0,s.jsxs)("div",Object.assign({className:"sort-header"},{children:[(0,s.jsx)(Ee.Z,{size:16,onClick:()=>{u("check")}},void 0),(0,s.jsx)("div",Object.assign({className:"back",onClick:()=>{u("check")}},{children:d("positions-preferenceBack")}),void 0)]}),void 0),(0,s.jsx)("div",Object.assign({className:"list"},{children:(0,s.jsx)(Fe.Z,{items:r,onSort:e=>{t&&t(e)}},void 0)}),void 0)]}),void 0)})),De=n.memo((({headers:e,onCheck:t,onSort:i})=>(0,s.jsxs)("div",Object.assign({className:"action-bar"},{children:[(0,s.jsx)(Ae,{},void 0),(0,s.jsx)(Ve.ZP,Object.assign({trigger:"click",sx:{marginLeft:16,marginTop:"4px"},overlay:(0,s.jsx)(He,{headers:e,onCheck:t,onSort:i},void 0),overlayProps:{marginBottom:"8px"},placement:"top",enablePortal:!0},{children:(0,s.jsx)(Me.Z,{mr:"8px",fontSize:"20px",sx:{color:"icons.close",cursor:"pointer","&:hover path":{fill:"t.third"}}},void 0)}),void 0)]}),void 0)));var _e=i(66068),Ye=i(24071);const qe=({order:e})=>{const{getI18n:t}=(0,S.Z)(),{actionStrategyModal:i}=(0,n.useContext)(L.Z),{strategyId:o,strategyType:r}=e;return"OTOCO"!==r&&"OTO"!==r||!o?(0,s.jsx)("div",Object.assign({className:"strategy"},{children:"--"}),void 0):(0,s.jsx)("div",Object.assign({className:"strategy valid",onClick:()=>i(e)},{children:t("strategyView",{defaultValue:"View"})}),void 0)},Qe=n.memo((e=>{const{symbol:t,orderId:i,side:o,reduceOnly:r,positionSide:a="BOTH",closePosition:l,timeInForce:d,type:c,activatePrice:u,priceRate:g,workingType:p}=e,{getI18n:x}=(0,S.Z)(),{actionCancel:y,changeSymbol:h,useColumn:m,headers:v}=(0,n.useContext)(L.Z),j=m(e),b=x("closePosition",{defaultValue:"Close Position"}),{nextDate:O,symbolName:f,nextPrice:C,nextAmount:k,nextType:P}=j,{nextFilled:Z,nextTriggerConditions:T}=j;return(0,s.jsx)("div",Object.assign({className:"openOrderRow body"},{children:v.filter((e=>e.defaultChecked)).map((n=>{const{key:m}=n;switch(m){case"time":return(0,s.jsx)("div",Object.assign({className:"time"},{children:O}),m);case"symbol":return(0,s.jsx)("div",Object.assign({className:"symbol",onClick:()=>{h({symbol:t})}},{children:(0,s.jsx)(Ye.O,{symbolName:f,fallbackText:t},void 0)}),m);case"type":return(0,s.jsx)("div",Object.assign({className:"type"},{children:P}),m);case"side":return(0,s.jsx)("div",Object.assign({className:"side side-"+("BUY"===o?"buy":"sell")},{children:"BUY"===o?x(`sideBuy${a}`,{defaultValue:"Buy"}):x(`sideSell${a}`,{defaultValue:"Sell"})}),m);case"price":return(0,s.jsx)("div",Object.assign({className:"price"},{children:C}),m);case"amount":return(0,s.jsx)("div",Object.assign({className:"amount"},{children:l?b:k}),m);case"filled":return(0,s.jsx)("div",Object.assign({className:"filled"},{children:Z}),m);case"reduceOnly":return(0,s.jsx)("div",Object.assign({className:"reduceOnly"},{children:r?x("YES",{defaultValue:"YES"}):x("NO",{defaultValue:"NO"})}),m);case"postOnly":return(0,s.jsx)("div",Object.assign({className:"postOnly"},{children:"GTX"===d?x("YES",{defaultValue:"YES"}):x("NO",{defaultValue:"NO"})}),m);case"conditions":return(0,s.jsxs)("div",Object.assign({className:"conditions"},{children:[(0,s.jsx)("div",Object.assign({style:{whiteSpace:"pre",textAlign:"left"}},{children:T}),void 0),(0,s.jsx)(he.Z,{type:c,workingType:p,activatePrice:u,priceRate:g},void 0)]}),m);case"strategy":return(0,s.jsx)(qe,{order:e},m);case"action":return(0,s.jsx)("div",Object.assign({className:"action"},{children:(0,s.jsx)(_e.Z,{sx:{cursor:"pointer",color:"t.third","&:hover":{color:"t.primary"}},size:20,onClick:()=>{y((({orderId:e})=>i===e))}},void 0)}),m);default:return null}}))}),void 0)})),Ge={time:115,symbol:85,type:100,side:85,price:100,amount:110,filled:120,reduceOnly:90,postOnly:80,conditions:112,strategy:55,action:70},Ke=e=>({width:`${e}px`,flex:`1 0 ${e}px`}),Ue={flexDirection:"column",height:"100%",overflowX:"auto",overflowY:"hidden",".action-bar":{display:"flex",alignItems:"center",justifyContent:"flex-end",position:"absolute",top:0,right:"16px",zIndex:"999",height:"40px","&.fullscreen":{right:"12px"}},".openOrderRow":{my:0,py:0,display:"flex",alignItems:"center",flex:"none",color:"t.secondary",fontSize:[0],cursor:"auto",width:"100%",height:"40px",boxSizing:"border-box",borderBottom:"1px solid",borderBottomColor:"newLine","&.header":{height:"32px"},"&.body":{":hover":{backgroundColor:"bg3",".symbol":{color:"t.yellow"}},".symbol":{cursor:"pointer"},".side":{"&-buy":{color:"buy"},"&-sell":{color:"sell"}},".strategy.valid":{color:"t.yellow200",cursor:"pointer",":hover":{color:"t.yellow300"}},".price, .amount, .conditions":{display:"flex",alignItems:"center"}},".time":Object.assign({},Ke(Ge.time)),".symbol":Object.assign({},Ke(Ge.symbol)),".type":Object.assign({},Ke(Ge.type)),".side":Object.assign({},Ke(Ge.side)),".price":Object.assign({},Ke(Ge.price)),".amount":Object.assign({},Ke(Ge.amount)),".filled":Object.assign({},Ke(Ge.filled)),".reduceOnly":Object.assign({},Ke(Ge.reduceOnly)),".postOnly":Object.assign({},Ke(Ge.postOnly)),".conditions":Object.assign({},Ke(Ge.conditions)),".strategy":Object.assign({},Ke(Ge.strategy)),".action":Object.assign({},Ke(Ge.action))}},We=e=>(0,s.jsx)(Qe,Object.assign({},e),void 0),Xe=(e,t)=>t[e].orderId,Je=({headers:e,onCheckHeader:t,onSortHeader:i,items:r=[],loading:a})=>{const{emptyText:d,actionCancel:c}=n.useContext(L.Z),u=(0,n.useMemo)((()=>{let t=0;return e.filter((e=>e.defaultChecked)).forEach((({key:e})=>{t+=Ge[e]||0})),{minWidth:t}}),[e]),{getI18n:g}=(0,S.Z)(),{getI18n:p}=(0,x.yk)(),{apiError:y,onRefresh:h}=(()=>{const e=(0,o.v9)((e=>e.loading.effects.orders.queryOpenOrder)),t=(0,o.v9)((e=>e.orders.openOrder.apiError)),i=(0,o.I0)(),s=(0,n.useCallback)((()=>{e||i.orders.queryOpenOrder()}),[e,i.orders]);return(0,n.useMemo)((()=>({loading:e,apiError:t,onRefresh:s})),[e,t,s])})(),m=(0,n.useCallback)((()=>{c(0,g("actionAllMsg",{defaultValue:"Are you sure you want to cancel all?"}))}),[]);return(0,s.jsxs)(l.Z,Object.assign({sx:Ue},{children:[(0,s.jsx)(De,{headers:e,onSort:i,onCheck:t},void 0),(0,s.jsx)(Ie,{hasData:(null==r?void 0:r.length)>0,headers:e,style:u},void 0),(0,s.jsx)(we.v,Object.assign({apiError:y,confirmTip:p("openOrderErrorConfirmTip",{defaultValue:"Cancel all open orders here."}),onRefresh:h,onConfirm:m},{children:(0,s.jsx)(Te.a,{direction:"xxx",dataSource:r,loading:a,loadWithContent:!0,listSx:u,itemElement:We,itemKey:Xe,itemHeight:40,emptyChildren:(0,s.jsx)(pe.pB,{children:d},void 0),scrollPerf:!1},void 0)}),void 0)]}),void 0)};var et=function(e,t,i,s){return new(i||(i=Promise))((function(n,o){function r(e){try{l(s.next(e))}catch(e){o(e)}}function a(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((s=s.apply(e,t||[])).next())}))};(0,O.nM)();const tt=[null,"LIMIT","STOP"],it=n.memo((()=>{const e="light"===(0,h.Fg)(),[t,{onCheckHeader:i,onSortHeader:c}]=(()=>{const{getI18n:e}=(0,S.Z)(),{getI18n:t}=(0,x.yk)(),[i,o]=(0,V.Z)(O.rR,["reduceOnly","postOnly","strategy"]),[r,a]=(0,V.Z)(O.sx,["time","symbol","type","side","price","amount","filled","reduceOnly","postOnly","conditions","strategy","action"]);return[(0,n.useMemo)((()=>{const n=[{key:"time",text:e("time",{defaultValue:"Time"}),checkable:!1,sortable:!0},{key:"symbol",text:e("symbol",{defaultValue:"Symbol"}),checkable:!1,sortable:!0},{key:"type",text:e("type",{defaultValue:"Type"}),checkable:!1,sortable:!0},{key:"side",text:e("side",{defaultValue:"Side"}),checkable:!1,sortable:!0},{key:"price",text:e("price",{defaultValue:"Price"}),checkable:!1,sortable:!0},{key:"amount",text:e("amount",{defaultValue:"Amount"}),checkable:!1,sortable:!0},{key:"filled",text:e("filled",{defaultValue:"Filled"}),checkable:!1,sortable:!0},{key:"reduceOnly",text:e("reduceOnly",{defaultValue:"Reduce Only"}),checkable:!0,sortable:!0},{key:"postOnly",text:t("orderType-postOnly",{defaultValue:"Post Only"}),checkable:!0,sortable:!0},{key:"conditions",text:e("triggerConditions",{defaultValue:"Trigger"}),checkable:!1,sortable:!0},{key:"strategy",text:e("strategy",{defaultValue:"Strategy"}),checkable:!0,sortable:!0},{key:"action",text:e("action",{defaultValue:"Cancel All"}),overlay:(0,s.jsx)(N.ZP,{},void 0),checkable:!1,sortable:!0}].map((e=>Object.assign(Object.assign({},e),{defaultChecked:!e.checkable||(null==i?void 0:i.includes(e.key))||!1})));return r&&n.sort(((e,t)=>r.indexOf(e.key)-r.indexOf(t.key))),n}),[e,t,i,r]),{onCheckHeader:o,onSortHeader:a}]})(),[m]=(0,h.z4)(),v=(0,o.I0)(),{enqueueNotification:j}=(0,p.Z)(),{getI18n:b}=(0,x.yk)(),{getI18n:f}=(0,S.Z)(),[C,k]=(0,n.useState)(""),[P,Z]=(0,n.useState)({}),T="traditional",{preOrders:B}=(0,h.E)(),z=(0,o.v9)((e=>e.loading.effects.orders.queryOpenOrder));(0,n.useEffect)((()=>{v.orders.queryOpenOrder()}),[]);const{loading:H,delOpenOrders:D}=A?(()=>{const[{loading:e},t]=(0,I.Z)(((e={})=>R(void 0,void 0,void 0,(function*(){return(e=>"batch"in e?(0,M.y)({type:e.type,symbol:e.symbol}):(0,M.r7)(e))(e)}))),[]);return{loading:e,delOpenOrders:t}})():(()=>{const[{loading:e},t]=(0,I.Z)(((e={})=>R(void 0,void 0,void 0,(function*(){return(e=>"batch"in e?(0,M.O9)({type:e.type,symbol:e.symbol}):(0,M.Ce)(e))(e)}))),[]);return{loading:e,delOpenOrders:t}})(),{isOrderHideOtherPairs:_}=(0,h.VX)(),[Y,q]=(0,n.useState)(_),Q=(0,n.useCallback)((e=>{q(e),v.userProfile.save({key:"isOrderHideOtherPairs",value:e})}),[v.userProfile]),G=(0,y.Nm)(B,Y,m),K=(0,h.d0)(),U=(0,n.useCallback)((e=>et(void 0,void 0,void 0,(function*(){const t="number"==typeof e?{batch:!0,type:tt[e],symbol:Y?m:null}:G.filter((t=>e(t)))[0];u()(t)||(yield D(t))}))),[Y,m,G,D]),W=(0,n.useCallback)(((t,i)=>et(void 0,void 0,void 0,(function*(){i?E.ZP.show({isLight:e,color:T,showCloseIcon:!1,sx:{width:["300px","360px"],height:"auto"},children:(0,s.jsxs)(a.Z,{children:[(0,s.jsxs)(a.Z,Object.assign({px:1,pt:[0,"16px"],sx:{textAlign:"center"}},{children:[(0,s.jsx)(r.Z,{size:[60,96]},void 0),(0,s.jsx)("div",{children:i},void 0)]}),void 0),(0,s.jsxs)(l.Z,Object.assign({mt:"24px"},{children:[(0,s.jsx)(d.Z,Object.assign({sx:{width:.5,mr:3},sz:"l",flexGrow:1,colorStyle:"secondary",onClick:()=>E.ZP.close()},{children:f("dialog-cancel",{defaultValue:"Cancel"})}),void 0),(0,s.jsx)(d.Z,Object.assign({sx:{width:.5},sz:"l",flexGrow:1,onClick:()=>{U(t),E.ZP.close()}},{children:f("dialog-confirm",{defaultValue:"Confirm"})}),void 0)]}),void 0)]},void 0)}):U(t)}))),[U,f,e,T]),X=(0,n.useCallback)((e=>et(void 0,void 0,void 0,(function*(){const{success:t}=yield(0,g.nC)(e,{});t&&j({header:b("amendmentOrderSubmitted",{defaultValue:"Amendment Order Submitted"})})}))),[b,j]),J=!G.length&&z,ee=(0,n.useCallback)((()=>{k(""),Z({})}),[k,Z]),te=(0,n.useCallback)((e=>{k("STRATEGY_ORDER"),Z(e)}),[k,Z]),ie=(0,n.useCallback)(((e,t,i)=>{k("MODIFY_ORDER"),Z(Object.assign(Object.assign({},e),{modifyParams:t,onConfirm:i}))}),[k,Z]),se=f("nodata",{defaultValue:"You have no open orders."}),ne=(0,n.useMemo)((()=>({symbol:m,emptyText:se,actionCancel:W,actionModifyOrder:X,actionStrategyModal:te,actionModifyConfirmModal:ie,changeSymbol:K,handleHideOtherPairs:Q,checked:Y,useColumn:w,useStrategyOrder:F,headers:t})),[W,X,te,ie,K,Y,se,Q,m,t]);return(0,s.jsx)(L.Z.Provider,Object.assign({value:ne},{children:(0,s.jsx)(a.Z,Object.assign({height:"100%",px:"sm"},{children:(0,s.jsx)($.Z,{children:({isMobile:e,isIPad:n})=>(0,s.jsxs)(s.Fragment,{children:[n?(0,s.jsx)(Ze,{isMobile:e,items:G,girdLoading:J,outLoading:z||H},void 0):(0,s.jsx)(Je,{headers:t,onCheckHeader:i,onSortHeader:c,items:G,loading:z||H},void 0),"STRATEGY_ORDER"===C&&(0,s.jsx)(de,{isMobile:e,visible:!0,order:P,onClose:ee},void 0),"MODIFY_ORDER"===C&&(0,s.jsx)(ge,{order:P,onClose:ee},void 0)]},void 0)},void 0)}),void 0)}),void 0)}))},74568:(e,t,i)=>{i.d(t,{Z:()=>l});var s=i(52322),n=i(23299),o=i(2784),r=i(48437),a=i(70993);const l=o.memo((({type:e,workingType:t,activatePrice:i,priceRate:o})=>{const{getI18n:l,i18n:{language:d}}=(0,a.yk)();if("TRAILING_STOP_MARKET"!==e)return null;const c=l("trailing-stop-market-tip",{defaultValue:"Activation Price: {{activatePrice}}, Trigger Type: {{workingType}}, Callback Rate: {{priceRate}}%. ",activatePrice:Number(i)?Number(i):l("advancedStrategy-marketPrice"),workingType:l("CONTRACT_PRICE"===t?"lastPrice":"tradeHistory-positions-markPriceTitle"),priceRate:o});return(0,s.jsx)(r.m,Object.assign({hideUnderLine:!0,sx:{flex:"none"},learnMoreLink:`/${d}/support/faq/360042299292`,tip:c},{children:(0,s.jsx)(n.Z,{size:16},void 0)}),void 0)}))}}]);