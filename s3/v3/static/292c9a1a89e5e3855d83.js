"use strict";(self.webpackChunkcloud_onchain_trade_sdk=self.webpackChunkcloud_onchain_trade_sdk||[]).push([[564],{51796:(e,t,a)=>{a.d(t,{D:()=>A});var i=a(11273),l=a(94043),n=a(58395),s=a(89339),o=a(33740),r=a(76933),c=a(17921);const u=(e,t=18)=>new c.Z(e).shiftedBy(t).toString(10);var d=a(51616),m=a(12559),h=a(28006),f=a(52983),p=a(38880),x=a(37444),E=a(95386),g=a(42249),v=a(50855),b=a(37672),C=a(10600),P=a(73246),N=a(86282);const w={xl:{width:"18px",height:"48px",mr:"5px"},l:{width:"18px",height:"24px",mr:"5px"},m:{width:"18px",height:"24px",mr:"5px"},xs:{width:"18px",height:"12px",mr:"5px"}},y={":disabled:not(.inactive),:hover:not(:disabled):not(:active)":{backgroundColor:"button.defaultBg",backgroundImage:"none",borderColor:"t.third",color:"button.disableColor"}},O=(0,f.forwardRef)((({loading:e,children:t,sz:a="m",sx:i={},spinnerProps:l={},...n},s)=>{const o=w[a]||{},r=e?y:{},{sx:c={},...u}=l,d=(0,f.useCallback)(((...t)=>e?null:n.onClick&&n.onClick(...t)),[n.onClick,e]);return f.createElement(C.Z,{ref:s,sx:{...r,...i},disabled:e,sz:a,...n,onClick:d},e&&f.createElement(P.Z,{itemsColor:"button.disableColor",sx:{...o,...c},...u}),f.createElement(N.Z,{display:"inherit"},t))}));O.displayName="LoadingButton";const I=O;var _=a(60103);const L=({approve:e,getI18n:t,children:a,refetch:i,disabled:l})=>{const{submit:n}=(0,_.t)({getI18n:t}),[s,o]=(0,f.useState)(!1),[r,c]=(0,f.useState)(!1),u=!(!s||r)||l,d=(0,f.useCallback)((()=>{return t=void 0,a=void 0,s=function*(){o(!0),c(!1);try{e&&(yield n(e))}catch(e){c(!0)}i(),o(!1)},new((l=void 0)||(l=Promise))((function(e,i){function n(e){try{r(s.next(e))}catch(e){i(e)}}function o(e){try{r(s.throw(e))}catch(e){i(e)}}function r(t){var a;t.done?e(t.value):(a=t.value,a instanceof l?a:new l((function(e){e(a)}))).then(n,o)}r((s=s.apply(t,a||[])).next())}));var t,a,l,s}),[n,e,i]);return(0,f.useMemo)((()=>f.createElement(I,{type:"button",sx:{width:"100%",height:"100%"},loading:s&&!r,onClick:d,disabled:u},a)),[u,a,d,r,s])};var S=a(27618);const k=({label:e,value:t,className:a})=>(0,f.useMemo)((()=>f.createElement("div",{className:(0,S.cn)("flex flex-col flex-[1]",a)},f.createElement("div",{className:"text-caption text-t-third"},e),f.createElement("div",{className:"text-t-primary text-subtitle2"},t))),[e,a,t]),D=[{key:"0.25",label:"25%"},{key:"0.5",label:"50%"},{key:".75",label:"75%"},{key:"1",label:"100%"}],M=({hash:e,onClose:t})=>{const a=(0,g.h)(),{getI18n:i,usePositionAddMargin:o,onChainPerpContractAddress:r,useActionBtnDisabled:b}=(0,f.useContext)(v.Z),{disabled:C}=b(),[P,N]=(0,f.useState)(-1),[w,y]=(0,f.useState)("0"),[O,I]=(0,f.useState)(""),{symbol:_,side:S,marginToken:M,marginQtyPrecision:A,pricePrecision:F,formatNumber:B,calcMargin:R,calcLeverage:T,calcLiqPrice:z,useTokenApprove:Z,useContractAddMargin:G}=o(e),{address:U}=(0,d.mA)(),{chain:q}=(0,d.LN)(),V=E.KF.has(M)?"":M,{data:W}=(0,d.dQ)({address:V||void 0}),{decimals:H=(null==q?void 0:q.nativeCurrency.decimals),symbol:j=(0,E.De)(null==q?void 0:q.nativeCurrency.symbol)}=W||{},{data:Q}=(0,d.KQ)({address:U,token:V,enabled:Boolean(void 0!==V),cacheTime:E.g_,watch:!0}),{approve:K}=Z(V,m.parseUnits(w,H)),{addMargin:$}=G(),Y=(0,f.useMemo)((()=>{var e;return new c.Z(null!==(e=null==Q?void 0:Q.formatted)&&void 0!==e?e:0).toFixed(A,c.Z.ROUND_DOWN)}),[null==Q?void 0:Q.formatted,A]),{data:J,refetch:X}=(0,d.do)({address:V,abi:h.em,functionName:"allowance",args:[U,r],enabled:Boolean(V)&&Boolean(U)&&Boolean(r)}),ee=(0,f.useCallback)((()=>t()),[t]),te=(0,f.useCallback)((e=>{y(e||"0"),N(-1)}),[]),ae=(0,f.useCallback)(((e,t)=>{N(e),y(new c.Z(t).multipliedBy(Y).toFixed(A,c.Z.ROUND_DOWN))}),[Y,A]),ie=(0,f.useCallback)((()=>{$({hash:e,amount:u(w,H),marginToken:V,closeModalCallBack:ee})}),[$,ee,e,H,w,V]),le=(0,f.useMemo)((()=>new c.Z(Y).isLessThanOrEqualTo(0)||new c.Z(Y).isLessThan(w)?{label:i("userinfo-dialog-margin-insufficient-balance","Insufficient balance"),disabled:!0}:{label:f.createElement("div",{className:"flex items-center"},f.createElement(l.b,{className:"mr-2",width:"20px",height:"20px",fontSize:"20px"}),f.createElement("span",null,i("userinfo-dialog-margin-button-confirm","Add Margin"))),disabled:new c.Z(w).isLessThanOrEqualTo(0)}),[i,w,Y]),ne=(0,f.useMemo)((()=>R(w).toString()),[R,w]),se=(0,f.useMemo)((()=>T(ne).toString()),[T,ne]),oe=(0,f.useMemo)((()=>{const e=z(ne);return e.isNegative()?"-":B(e.toString(),F)}),[z,ne,B,F]),re=a[j]||j;return(0,f.useMemo)((()=>f.createElement("div",{className:"[&_.add-margin-input_>_div]:!rounded-none"},f.createElement("div",{className:"flex items-center sm:hidden mb-[16px]"},f.createElement("div",{className:"flex-[1] text-t-primary text-subtitle1 text-center"},i("userinfo-dialog-margin-add-margin","Add Margin")),f.createElement(n.E,{onClick:ee,className:"w-5 h-5 text-[20px] text-t-third cursor-pointer absolute right-4"})),f.createElement("div",{className:"flex flex-col"},f.createElement("div",{className:"flex flex-row items-center justify-between"},f.createElement("div",{className:"text-t-primary text-subtitle2"},_," ",S),f.createElement(n.E,{width:"20px",height:"20px",fontSize:"20px",className:"text-t-third cursor-pointer absolute right-[16px] hidden sm:flex",onClick:ee})),f.createElement("div",{className:"flex justify-between my-[16px]"},f.createElement(k,{className:"text-left",label:i("userinfo-positions-column-leverage","Leverage"),value:`${B(se,1)}x`}),f.createElement(k,{className:"text-center",label:i("userinfo-positions-column-initialMargin","Initial Margin"),value:`${B(ne,A)} ${re}`}),f.createElement(k,{className:"text-right",label:i("userinfo-positions-column-liquidPriceV2","Liq. Price"),value:oe})),f.createElement("div",{className:"rounded p-4 flex mb-4 flex-col bg-interactive-interactive01 order-form-card"},f.createElement("div",{className:"flex flex-row justify-between mb-2"},f.createElement("div",{className:"text-t-primary text-subtitle2"},i("userinfo-dialog-margin-add-margin","Add Margin")),f.createElement("div",{className:"text-t-secondary text-caption"},i("userinfo-dialog-margin-user-avail",{defaultValue:"Available : {{available}} {{margin}}",available:Y,margin:re}))),f.createElement(p.Q,{className:`add-margin-input h-[40px] mt-[4px] rounded-0 ${O?"border-interactive-primary":"!border-t-third"} border-t-0 border-x-0 [&>input]:text-left`,precision:A,maxLength:19,boxProps:{className:"flex pb-0.5 rounded-none border-x-0 border-t-0 border-b border-t-third w-full h-10 [&_input]:text-left [&_input]:px-0 [&_.bn-input-suffix]:!mr-0"},value:w,onChange:te,onFocus:()=>I("focus"),onBlur:()=>I(""),suffix:f.createElement("div",{className:"text-body2 text-t-primary"},re)})),f.createElement(x.W,{activeIndex:P,options:D,onChange:ae}),f.createElement("div",{className:"flex mt-8 h-10"},V&&J&&!new c.Z(u(w,H)).isLessThanOrEqualTo(J.toString())&&new c.Z(w).isLessThanOrEqualTo(Y)?f.createElement(L,{approve:K,getI18n:i,refetch:X,disabled:C},i("userinfo-dialog-margin-increase-authorized-amount",{defaultValue:"Increase {{symbol}} authorization amount",symbol:re})):f.createElement(s.z,{className:"w-full text-subtitle2",disabled:le.disabled||C,onClick:ie},le.label))))),[i,ee,_,S,B,se,ne,A,re,oe,Y,O,w,te,P,ae,V,J,H,K,X,C,le.disabled,le.label,ie])},A=()=>{const[e,t]=(0,f.useState)(""),{isMobile:a}=(0,i.F)(),l=(0,f.useCallback)((()=>{t("")}),[]);return(0,f.useEffect)((()=>b.ee.on("MODAL_ADD_MARGIN_OPEN",(({hash:e})=>{t(e)}))),[]),(0,f.useEffect)((()=>b.ee.on("MODAL_ADD_MARGIN_CLOSE",(()=>{t("")}))),[]),(0,f.useMemo)((()=>e?a?f.createElement(o.yo,{open:!0},f.createElement(o.ue,{side:"bottom",className:"w-full border-none p-4 pb-6 rounded-t-[4px] bg-interactive-interactiveBg",onPointerDownOutside:l},f.createElement(M,{hash:e,onClose:l}))):f.createElement(r.Vq,{open:!0},f.createElement(r.PK,null,f.createElement(r.cZ,{className:"w-full sm:w-[320px] p-4 min-h-[384px] sm:min-h-[332px]",onPointerDownOutside:l},f.createElement(M,{hash:e,onClose:l})))):null),[e,a,l])}},80291:(e,t,a)=>{a.d(t,{n:()=>c});var i=a(76933),l=a(52983);const n=e=>l.createElement("svg",{width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 96 96",...e},l.createElement("g",{filter:"url(#GeneralWarning_svg__filter0_i)"},l.createElement("rect",{width:65,height:65,x:8,y:9,fill:"url(#GeneralWarning_svg__paint0_linear)",rx:10})),l.createElement("g",{filter:"url(#GeneralWarning_svg__filter1_i)"},l.createElement("rect",{width:58,height:58,x:30,y:31,fill:"#F1F8FF",fillOpacity:.5,rx:8})),l.createElement("g",{filter:"url(#GeneralWarning_svg__filter2_di)"},l.createElement("rect",{width:38,height:38,x:40,y:41,fill:"#fff",rx:19})),l.createElement("g",{filter:"url(#GeneralWarning_svg__filter3_d)"},l.createElement("path",{fill:"#F0B90B",fillRule:"evenodd",d:"M62 51c0-1.105-1-3-3-3s-3 1.895-3 3l1 13a2 2 0 104 0l1-13zm-3 21a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})),l.createElement("defs",null,l.createElement("filter",{id:"GeneralWarning_svg__filter0_i",width:66,height:66,x:8,y:9,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},l.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),l.createElement("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),l.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),l.createElement("feOffset",{dx:1,dy:1}),l.createElement("feGaussianBlur",{stdDeviation:1}),l.createElement("feComposite",{in2:"hardAlpha",k2:-1,k3:1,operator:"arithmetic"}),l.createElement("feColorMatrix",{values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.45 0"}),l.createElement("feBlend",{in2:"shape",result:"effect1_innerShadow"})),l.createElement("filter",{id:"GeneralWarning_svg__filter1_i",width:59,height:59,x:30,y:31,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},l.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),l.createElement("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),l.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),l.createElement("feOffset",{dx:1,dy:1}),l.createElement("feGaussianBlur",{stdDeviation:1}),l.createElement("feComposite",{in2:"hardAlpha",k2:-1,k3:1,operator:"arithmetic"}),l.createElement("feColorMatrix",{values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.45 0"}),l.createElement("feBlend",{in2:"shape",result:"effect1_innerShadow"})),l.createElement("filter",{id:"GeneralWarning_svg__filter2_di",width:50,height:50,x:36,y:37,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},l.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),l.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),l.createElement("feOffset",{dx:2,dy:2}),l.createElement("feGaussianBlur",{stdDeviation:3}),l.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),l.createElement("feColorMatrix",{values:"0 0 0 0 0.941667 0 0 0 0 0.797749 0 0 0 0 0.427674 0 0 0 0.25 0"}),l.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow"}),l.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"}),l.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),l.createElement("feOffset",{dx:1,dy:1}),l.createElement("feGaussianBlur",{stdDeviation:.5}),l.createElement("feComposite",{in2:"hardAlpha",k2:-1,k3:1,operator:"arithmetic"}),l.createElement("feColorMatrix",{values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.3 0"}),l.createElement("feBlend",{in2:"shape",result:"effect2_innerShadow"})),l.createElement("filter",{id:"GeneralWarning_svg__filter3_d",width:14,height:32,x:54,y:46,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},l.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),l.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),l.createElement("feOffset",{dx:2,dy:2}),l.createElement("feGaussianBlur",{stdDeviation:2}),l.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),l.createElement("feColorMatrix",{values:"0 0 0 0 1 0 0 0 0 0.811167 0 0 0 0 0.141667 0 0 0 0.25 0"}),l.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow"}),l.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"})),l.createElement("linearGradient",{id:"GeneralWarning_svg__paint0_linear",x1:13.417,x2:60.591,y1:9,y2:74,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#FFD37E"}),l.createElement("stop",{offset:1,stopColor:"#F0B90B"}))));var s=a(89339),o=a(50855),r=a(37672);const c=()=>{const{getI18n:e,useActionBtnDisabled:t,usePositions:a}=(0,l.useContext)(o.Z),c=a(),{disabled:u}=t(),[d,m]=(0,l.useState)(!1),h=(0,l.useCallback)((()=>{m(!1)}),[]),f=(0,l.useCallback)((()=>m(!0)),[]),p=(0,l.useCallback)((()=>{r.ee.emit("POSITION_ALL_CLOSE",void 0),h()}),[h]);return(0,l.useEffect)((()=>(r.ee.on("MODAL_CLOSE_ALL_POSITION",f),r.ee.on("MODAL_CLOSE_ALL_POSITION_CLOSE",h),()=>{r.ee.off("MODAL_CLOSE_ALL_POSITION",f),r.ee.off("MODAL_CLOSE_ALL_POSITION_CLOSE",h)})),[h,f]),l.createElement(i.Vq,{open:d},l.createElement(i.PK,null,l.createElement(i.cZ,{className:"!w-[298px] !min-h-[280px] p-6",onPointerDownOutside:h},l.createElement("div",{className:"flex flex-col"},l.createElement("div",{className:"flex w-full justify-center items-center mb-4"},l.createElement(n,{width:60,height:60})),l.createElement("div",{className:"flex w-full justify-center items-center mb-2"},l.createElement("div",{className:"text-subtitle1 text-t-primary"},e("userinfo-positions-close-all-position-title",{defaultValue:"Closing all positions"}))),l.createElement("div",{className:"flex w-full justify-center items-center mb-6"},l.createElement("div",{className:"text-body2 text-t-third text-center"},e("userinfo-positions-close-all-position-desc-v2",{defaultValue:"Closing all positions will cancel all open orders. And the current {{number}} positions will be filled with market orders.",number:c.length}))),l.createElement("div",{className:"flex w-full justify-between items-center"},l.createElement(s.z,{className:"text-subtitle2 flex-[1] j-10 !mr-3",onClick:h,variant:"secondary"},e("userinfo-positions-close-position-cancel",{defaultValue:"Cancel"})),l.createElement(s.z,{className:"text-subtitle2 flex-[1] h-10",onClick:p,disabled:u},l.createElement("div",{className:"flex items-center"},e("userinfo-positions-close-position-confirm",{defaultValue:"Confirm"}))))))))}},49858:(e,t,a)=>{a.d(t,{t:()=>d});var i=a(8429),l=a(76933),n=a(89339),s=a(94043),o=a(52983),r=a(24757),c=a(50855),u=a(37672);const d=()=>{const{getI18n:e,useActionBtnDisabled:t,useColumnSymbol:a,useColumnPNL:d,useLeverage:m}=(0,o.useContext)(c.Z),{disabled:h}=t(),[f,p]=(0,o.useState)(""),{symbolType:x}=a(f),{ROIInNumber:E,isROINegative:g}=d(f),v=m(f),{min:b}=(0,r.Fe)(v.toNumber()),{isDegenMode:C}=(0,i.L)(x),P=(0,o.useCallback)((()=>{p("")}),[]),N=(0,o.useCallback)((({hash:e})=>p(e)),[]),w=(0,o.useCallback)((()=>{u.ee.emit("POSITION_CLOSE",{hash:f}),P()}),[f,P]);return(0,o.useEffect)((()=>(u.ee.on("MODAL_CLOSE_POSITION",N),u.ee.on("MODAL_CLOSE_POSITION_CLOSE",P),()=>{u.ee.off("MODAL_CLOSE_POSITION",N),u.ee.off("MODAL_CLOSE_POSITION_CLOSE",P)})),[P,N]),o.createElement(l.Vq,{open:Boolean(f)},o.createElement(l.PK,null,o.createElement(l.cZ,{className:"!w-[298px] !min-h-[186px]",onPointerDownOutside:P},o.createElement("div",{className:"flex flex-col"},o.createElement("div",{className:"flex w-full justify-between h-[38px] items-center"},o.createElement("div",{className:"text-t-primary text-subtitle1"},e("userinfo-positions-close-position-title",{defaultValue:"Close Position"})),o.createElement(l.GG,{onClick:P,className:"[&_svg]:w-5 [&_svg]:h-5 [&_svg]:text-[20px]"})),o.createElement("div",{className:"flex-1 pt-4 pb-10"},C&&!g&&E<b?o.createElement("div",{className:"text-body2 text-t-primary"},e("userinfo-positions-close-position-pnl-loss-close-patch1",{defaultValue:"When ROI is less than {rate}%, there may be a loss after closing the position due to close position fees.",rate:b})):null,o.createElement("div",{className:"text-body2 text-t-primary"},e("userinfo-positions-close-position-desc",{defaultValue:"Are you sure to close your position?"}))),o.createElement("div",{className:"flex w-full justify-between items-center"},o.createElement(n.z,{className:"text-subtitle2 flex-[1] j-10 !mr-2",onClick:P,variant:"secondary"},e("userinfo-positions-close-position-cancel",{defaultValue:"Cancel"})),o.createElement(n.z,{className:"text-subtitle2 flex-[1] h-10",onClick:w,disabled:h},o.createElement("div",{className:"flex items-center"},o.createElement(s.b,{className:"mr-2",width:"20px",height:"20px",fontSize:"20px"}),o.createElement("span",null,e("userinfo-positions-close-position-confirm",{defaultValue:"Confirm"})))))))))}},66099:(e,t,a)=>{a.d(t,{F:()=>S});var i=a(11273),l=a(58395),n=a(5837),s=a(33740),o=a(76933),r=a(17921),c=a(52983),u=a(49506),d=a(49382),m=a(26997);const h=({hash:e,onClose:t})=>{const{getI18n:a,usePositionDetail:i}=(0,c.useContext)(m.C),{usePositionDetailSymbol:n}=i(),{symbol:s,isLong:o,symbolName:r}=n(e);return(0,c.useMemo)((()=>c.createElement("div",{className:"items-center flex justify-between mb-4"},c.createElement("div",{className:"text-subtitle1 text-t-primary font-[500]"},r||s," ",o?a("orderForm-long","Long"):a("orderForm-short","Short")),c.createElement(l.E,{width:"20px",height:"20px",fontSize:"20px",className:"text-t-third cursor-pointer absolute right-4",onClick:t}))),[a,o,t,s,r])},f=({hash:e})=>{const{getI18n:t,usePositionDetail:a,staticHost:i}=(0,c.useContext)(m.C),{usePositionDetailLeverage:l,usePositionDetailPNLROI:n,usePositionDetailSymbol:s}=a(),{isPNLNegative:o,isPNLPositive:r}=n(e),{symbolType:h}=s(e),f=l(e);return c.createElement(u.Z,{label:t("userinfo-dialog-detail-leverage","Leverage")},c.createElement("div",{className:"flex items-center gap-[2px]"},f,c.createElement(d.b,{isPNLNegative:o,isPNLPositive:r,staticHost:i,symbolType:h})))},p=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(m.C),{usePositionDetailInitialMargin:i}=a(),l=i(e),n=(0,c.useMemo)((()=>c.createElement("div",{className:"w-[282px]"},c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line",color:"t.white"},t("userinfo-dialog-detail-position-initialMargin-tips01","Initial Margin is the margin initially allocated to this position.")),c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line mt-3",color:"t.white"},t("userinfo-dialog-detail-position-initialMargin-tips02","Initial Margin = Principal - Open Fee")))),[t]);return c.createElement(u.Z,{label:t("userinfo-dialog-detail-initialMargin","Initial Margin"),tips:n,showLabelSx:!0},l)},x=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(m.C),{usePositionDetailQtyAndSize:i,usePositionDetailPair:l}=a(),{baseAsset:n}=l(e),{size:s,qty:o}=i(e);return c.createElement(u.Z,{label:t("userinfo-dialog-detail-qty","QTY(Size)")},o," ",n," ( ≈ ",s," USD )")},E=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(m.C),{usePositionDetailEntryPrice:i}=a(),l=i(e);return c.createElement(u.Z,{label:t("userinfo-dialog-detail-entryPrice","Entry Price")},l," USD")},g=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(m.C),{usePositionDetailLiquidPrice:i}=a(),l=i(e);return c.createElement(u.Z,{label:t("userinfo-dialog-detail-estLiquidPrice","Est. Liquid Price")},l," USD")},v=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(m.C),{usePositionDetailLiqLostRate:i}=a(),l=i(e);return c.createElement(u.Z,{label:t("userinfo-dialog-detail-liquidLostRate","Liquid Lost Rate")},`${new r.Z(l).multipliedBy(100).toFixed(2)}%`)},b=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(m.C),{usePositionDetailFundingFee:i}=a(),{fundingFee:l,isFundingFeeNegative:n}=i(e);return c.createElement(u.Z,{label:t("userinfo-dialog-detail-accFundingFee","Acc. Funding Fee")},c.createElement("div",{className:"text-subtitle2",style:{color:n?"var(--colors-t-sell)":"var(--colors-t-buy)"}},l))},C=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(m.C),{usePositionDetailPNLROI:i}=a(),{PNL:l,isPNLNegative:n}=i(e),s=(0,c.useMemo)((()=>c.createElement("div",{className:"w-[282px]"},c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line",color:"t.white"},t("userinfo-dialog-detail-position-unrealizedPnl-tips01","Unrealized PNL only calculates the profit and loss generated after the position is successfully opened.")),c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line mt-3",color:"t.white"},t("userinfo-dialog-detail-position-unrealizedPnl-tips02","Long : Unrealized PNL = (Mark Price - Entry Price) * Qty + Funding Fee")),c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line",color:"t.white"},t("userinfo-dialog-detail-position-unrealizedPnl-tips03","Short : Unrealized PNL = (Entry Price - Mark Price ) * Qty + Funding Fee")))),[t]);return c.createElement(u.Z,{label:t("userinfo-dialog-detail-unrealizedPnl","Unrealized PNL"),tips:s,showLabelSx:!0},c.createElement("div",{className:"text-subtitle2",style:{color:n?"var(--colors-t-sell)":"var(--colors-t-buy)"}},l))},P=({hash:e})=>{const{getI18n:t,usePositionDetail:a,enableShare:i,ee:l}=(0,c.useContext)(m.C),{usePositionDetailPNLROI:s}=a(),{ROI:o,isROINegative:r}=s(e),d=(0,c.useCallback)((()=>l.emit("MODAL_POSITION_SHARE_OPEN",{hash:e,overlay:!0})),[l,e]),h=(0,c.useMemo)((()=>c.createElement("div",{className:"w-[282px]"},c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line",color:"t.white"},t("userinfo-dialog-detail-position-unrealizedROI-tips01","Unrealized ROI = Unrealized PNL / Initial margin * 100%")))),[t]);return c.createElement(u.Z,{label:t("userinfo-dialog-detail-unrealizedROI","Unrealized ROI"),tips:h,showLabelSx:!0},c.createElement("div",{className:"text-subtitle2",style:{color:r?"var(--colors-t-sell)":"var(--colors-t-buy)"}},o),i&&c.createElement("div",null,c.createElement(n.f,{className:"relative ml-0.5 cursor-pointer text-t-third",width:"16px",height:"16px",fontSize:"16px",onClick:d})))},N=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(m.C),{usePositionDetailOpenFee:i}=a(),l=i(e);return c.createElement(u.Z,{label:t("userinfo-dialog-detail-openFee","Open Fee")},l)},w=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(m.C),{usePositionDetailExecutionFee:i}=a(),l=i(e);return c.createElement(u.Z,{label:t("userinfo-dialog-detail-executionFee","Execution Fee")},l)},y=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(m.C),{usePositionDetailNetProfit:i}=a(),{netProfit:l,isNetProfitNegative:n}=i(e),s=(0,c.useMemo)((()=>c.createElement("div",{className:"w-[282px]"},c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line",color:"t.white"},t("userinfo-dialog-detail-position-netProfit-tips01","Net Profit is the profit and loss obtained after taking into account the trader's principal and trading fees.")),c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line mt-3",color:"t.white"},t("userinfo-dialog-detail-position-netProfit-tips02-v2","Net Profit = Realized PNL - Open Fee - Execution Fee")))),[t]);return c.createElement(u.Z,{label:t("userinfo-dialog-detail-netProfit","Net Profit"),tips:s,showLabelSx:!0},c.createElement("div",{className:"text-subtitle2",style:{color:n?"var(--colors-t-sell)":"var(--colors-t-buy)"}},l))},O=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(m.C),{usePositionDetailDuration:i}=a(),{time:l}=i(e);return c.createElement(u.Z,{label:t("userinfo-dialog-detail-time","Time")},l)},I=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(m.C),{usePositionDetailDuration:i}=a(),{duration:l}=i(e);return c.createElement(u.Z,{label:t("userinfo-dialog-detail-duration","Duration")},l)},_=({hash:e})=>c.createElement("div",{className:"flex gap-6 flex-col sm:flex-row max-h-[80vh] sm:max-h-[unset] overflow-auto sm:overflow-hidden"},c.createElement("div",{className:"flex flex-col w-full sm:w-1/2 gap-4"},c.createElement(f,{hash:e}),c.createElement(p,{hash:e}),c.createElement(x,{hash:e}),c.createElement(E,{hash:e}),c.createElement(g,{hash:e}),c.createElement(v,{hash:e}),c.createElement(b,{hash:e}),c.createElement(C,{hash:e}),c.createElement(P,{hash:e})),c.createElement("div",{className:"flex flex-col w-full sm:w-1/2 gap-4 bg-interactive-interactive01 dark:bg-interactive-interactive01 rounded-[10px] p-4 h-[max-content]"},c.createElement(N,{hash:e}),c.createElement(w,{hash:e}),c.createElement(y,{hash:e}),c.createElement("div",{className:"border-b-[var(--colors-border-line)] border-b border-solid"}),c.createElement(O,{hash:e}),c.createElement(I,{hash:e}))),L=({hash:e,onClose:t})=>(0,c.useMemo)((()=>c.createElement(c.Fragment,null,c.createElement(h,{hash:e,onClose:t}),c.createElement(_,{hash:e}))),[e,t]),S=()=>{const[e,t]=(0,c.useState)(""),{ee:a,usePositionDetail:l}=(0,c.useContext)(m.C),{onPositionDetailOpen:n,useIsDegenMode:r}=l(),u=r(),{isMobile:d}=(0,i.F)(),h=(0,c.useCallback)((()=>{t("")}),[]),f=(0,c.useCallback)((({hash:e})=>{null==n||n(u(e)),t(e)}),[u,n]);return(0,c.useEffect)((()=>(a.on("MODAL_POSITION_DETAIL_CLOSE",h),a.on("MODAL_POSITION_DETAIL_OPEN",f),()=>{a.off("MODAL_POSITION_DETAIL_CLOSE",h),a.off("MODAL_POSITION_DETAIL_OPEN",f)})),[a,h,f]),d?c.createElement(s.yo,{open:Boolean(e)},c.createElement(s.ue,{side:"bottom",className:"w-full border-none px-4 py-6 bg-interactive-interactiveBg",onPointerDownOutside:h},c.createElement(L,{hash:e,onClose:h}))):c.createElement(o.Vq,{open:Boolean(e)},c.createElement(o.PK,null,c.createElement(o.cZ,{className:"w-full sm:w-[750px] sm:min-w-[750px] p-4 sm:min-h-[332px]",onPointerDownOutside:h},c.createElement(L,{hash:e,onClose:h}))))}},26130:(e,t,a)=>{a.d(t,{m:()=>P});var i=a(11273),l=a(96336),n=a(89663),s=a(76126),o=a(47231),r=a(51616),c=a(33075),u=a(84542),d=a(91163),m=a(52983),h=a(82210),f=a(86364),p=a(12149),x=a(61239),E=a(26997),g=a(59712),v=function(e,t,a,i){return new(a||(a=Promise))((function(l,n){function s(e){try{r(i.next(e))}catch(e){n(e)}}function o(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(s,o)}r((i=i.apply(e,t||[])).next())}))};const b={markPrice:"-",ROI:"-",PNL:"-"},C=({hash:e,checked:t,onClose:a,snapshotRef:s,onCheckedChange:o,copy:c,download:u})=>{const[d,p]=(0,m.useState)(b),{locale:g,getI18n:v,useMarkPrice:C,usePositionDetail:P,useTheme:N,staticHost:w,siteHost:y}=(0,m.useContext)(E.C),{usePositionDetailSymbol:O,usePositionDetailLeverage:I,usePositionDetailPNLROI:_,usePositionDetailEntryPrice:L,usePositionDetailPricePrecision:S}=P(),{isLight:k}=N(),{PNLFormatted:D,ROI:M,marginSymbol:A}=_(e),{symbol:F,isLong:B}=O(e),R=C(F),T=I(e),z=L(e),Z=S(F),{address:G}=(0,r.mA)(),{isMobile:U}=(0,i.F)(),q=(0,x.e)({staticHost:w});return(0,m.useEffect)((()=>{void 0!==R&&d.markPrice===b.markPrice&&p({markPrice:R,ROI:M,PNL:D})}),[D,M,R]),m.createElement("div",{className:"flex flex-col"},a&&m.createElement(l.M,{width:"24px",height:"24px",fontSize:"24px",className:"text-t-third cursor-pointer absolute top-[8px] right-[8px] z-[1]",onClick:a}),m.createElement(h.L,{data:{hash:e,locale:g||"en",symbol:F,tokenInSymbol:A,closeTime:0,side:B?"LONG":"SHORT",leverage:T,markPrice:Number(d.markPrice)>0?(0,n.uf)(d.markPrice,Z):"-",entryPrice:z,closePrice:"-",PNL:d.PNL,ROI:d.ROI,isLightTheme:k,staticResource:q,SITE_HOST:y,userAddress:G,getI18n:v,sharePNL:t,snapshotRef:s}}),!U&&m.createElement(m.Fragment,null,m.createElement(f.k,{className:"pt-[12px] pb-[24px]",getI18n:v,checked:t,onCheckedChange:o}),m.createElement(f.n,{getI18n:v,copy:c,download:u})))},P=()=>{const{selectedNetworkId:e}=(0,c.o6)(),t=(0,r.xx)({chainId:e}),a=(0,u.pT)(t),{ee:l,getI18n:n,siteHost:h,locale:f}=(0,m.useContext)(E.C),[b,P]=(0,m.useState)(""),[N,w]=(0,m.useState)(!1),[y,O]=(0,m.useState)(!1),{isMobile:I}=(0,i.F)(),_=(0,m.useRef)(),L=(0,m.useMemo)((()=>(0,x.O)({network:null==a?void 0:a.apiNetwork,siteHost:h,locale:f,hash:b,sharePNL:y})),[null==a?void 0:a.apiNetwork,h,f,b,y]),S=(0,m.useCallback)((()=>v(void 0,void 0,void 0,(function*(){try{yield(0,s.v)(L),I||(0,d.PV)(n("share-copy-message","Copy Successfully"),{variant:"success"})}catch(e){g.error(e)}}))),[n,I,L]),k=(0,m.useCallback)((()=>v(void 0,void 0,void 0,(function*(){_.current&&(0,o.Q)({el:_.current,success(e){(0,o.L)(e,`share-position-${Date.now()}`)}})}))),[]),D=(0,m.useCallback)((e=>{"boolean"==typeof e&&O(e)}),[]),M=(0,m.useCallback)((()=>{P("")}),[]);return(0,m.useEffect)((()=>l.on("MODAL_POSITION_SHARE_OPEN",(({hash:e,overlay:t})=>{P(e),w(t)}))),[l]),(0,m.useEffect)((()=>l.on("MODAL_POSITION_SHARE_CLOSE",(()=>{P(""),w(!1)}))),[l]),(0,m.useMemo)((()=>b?I?m.createElement(p.V,{hash:b,onClose:M,getI18n:n,checked:y,onCheckedChange:D,copy:S,download:k},m.createElement(C,{hash:b,checked:y,snapshotRef:_})):m.createElement(p.t,{onClose:M,overlay:N},m.createElement(C,{hash:b,checked:y,onClose:M,onCheckedChange:D,copy:S,download:k,snapshotRef:_})):null),[S,k,n,b,I,D,M,N,y])}},26997:(e,t,a)=>{a.d(t,{C:()=>i});const i=a(52983).createContext({})},17461:(e,t,a)=>{a.d(t,{O:()=>i});const i={Classic:"Classic",Dumb:"Dumb"}},50855:(e,t,a)=>{a.d(t,{Z:()=>i});const i=a(52983).createContext({})},37672:(e,t,a)=>{a.d(t,{ee:()=>i});const i=new(a(13565).v)},26583:(e,t,a)=>{a.d(t,{m:()=>l});var i=a(52983);const l=i.memo((({percent:e=0,size:t=100,reverse:a=!1,round:l=!1,width:n=20,color:s="#000",bgColor:o="#000",id:r="canvas-circle-progress",style:c={},...u})=>{const d=(0,i.useMemo)((()=>t/2),[t]),m=(0,i.useCallback)((()=>{const i=document.getElementById(r);if(!i||!i.getContext)return;const c=i.getContext("2d");if(!c)return null;window.devicePixelRatio&&(i.width=t*window.devicePixelRatio,i.height=t*window.devicePixelRatio,c.scale(window.devicePixelRatio,window.devicePixelRatio)),c.lineWidth=n,c.strokeStyle=o,c.lineCap=l?"round":"butt",c.beginPath(),c.arc(d,d,d-n/2,0,2*Math.PI),c.stroke();const u=e/100*2;return c.strokeStyle=s,c.lineCap=l?"round":"butt",c.beginPath(),c.arc(d,d,d-n/2,-Math.PI/2,a?-Math.PI/2-u*Math.PI:u*Math.PI-Math.PI/2,a),c.stroke(),r}),[e,t,a,l,n,s,o,r,d]);return(0,i.useEffect)((()=>{m()}),[m]),i.createElement("canvas",{id:r,style:{width:t,height:t,...c},...u})}));l.displayName="CircleProgress"},83130:(e,t,a)=>{a.d(t,{o:()=>l});var i=a(52983);const l=e=>i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",...e},i.createElement("path",{d:"M12 6a1 1 0 00-1 1v4H7a1 1 0 100 2h4v4a1 1 0 102 0v-4h4a1 1 0 100-2h-4V7a1 1 0 00-1-1z"}),i.createElement("path",{fillRule:"evenodd",d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10 10-4.477 10-10zm-2 0a8 8 0 10-16 0 8 8 0 0016 0z",clipRule:"evenodd"}))}}]);